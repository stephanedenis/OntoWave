<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ğŸ”§ Diagnostic OntoWave Multilingue</title>
    <style>
        body { font-family: monospace; margin: 20px; background: #f5f5f5; }
        .diagnostic { 
            background: white; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 5px; 
            border-left: 4px solid #007acc; 
        }
        .error { border-left-color: #d73a49; }
        .success { border-left-color: #28a745; }
        .warning { border-left-color: #ffc107; }
        button { 
            padding: 10px 15px; 
            margin: 5px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
        }
        .test-btn { background: #007acc; color: white; }
        .fix-btn { background: #28a745; color: white; }
    </style>
</head>
<body>
    <h1>ğŸ”§ Diagnostic SystÃ¨me Multilingue OntoWave</h1>
    
    <div class="diagnostic">
        <h3>ğŸ“‹ Tests Ã  effectuer :</h3>
        <button class="test-btn" onclick="testOntoWave()">ğŸ§ª Tester OntoWave</button>
        <button class="test-btn" onclick="testLanguageButtons()">ğŸŒ Tester boutons langue</button>
        <button class="test-btn" onclick="openOntoWave()">ğŸŒŠ Ouvrir OntoWave</button>
        <button class="fix-btn" onclick="fixLanguageButtons()">ğŸ”§ Corriger boutons</button>
    </div>

    <div id="results"></div>

    <script>
        let results = document.getElementById('results');

        function log(message, type = 'diagnostic') {
            const div = document.createElement('div');
            div.className = 'diagnostic ' + type;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            results.appendChild(div);
            console.log(message);
        }

        function testOntoWave() {
            log('ğŸ§ª Test OntoWave...');
            
            // Ouvrir OntoWave dans une nouvelle fenÃªtre
            const ontoWaveWindow = window.open('http://localhost:8080/', 'ontowave');
            
            setTimeout(() => {
                try {
                    // Tester les Ã©lÃ©ments
                    const hasLangFr = ontoWaveWindow.document.getElementById('lang-fr');
                    const hasLangEn = ontoWaveWindow.document.getElementById('lang-en');
                    const hasToggle = ontoWaveWindow.document.querySelector('.lang-toggle');
                    const hasOntoWave = ontoWaveWindow.window.OntoWave;
                    
                    log(hasLangFr ? 'âœ… lang-fr trouvÃ©' : 'âŒ lang-fr manquant', hasLangFr ? 'success' : 'error');
                    log(hasLangEn ? 'âœ… lang-en trouvÃ©' : 'âŒ lang-en manquant', hasLangEn ? 'success' : 'error');
                    log(hasToggle ? 'âœ… lang-toggle trouvÃ©' : 'âŒ lang-toggle manquant', hasToggle ? 'success' : 'error');
                    log(hasOntoWave ? 'âœ… OntoWave chargÃ©' : 'âŒ OntoWave manquant', hasOntoWave ? 'success' : 'error');
                    
                } catch (e) {
                    log('âš ï¸ Erreur Cross-Origin, ouvrez les dev tools sur http://localhost:8080/', 'warning');
                }
            }, 3000);
        }

        function testLanguageButtons() {
            log('ğŸŒ Test des boutons de langue...');
            
            // Ouvrir OntoWave
            const ontoWaveWindow = window.open('http://localhost:8080/', 'ontowave');
            
            setTimeout(() => {
                try {
                    // Tester les fonctions
                    if (typeof ontoWaveWindow.toggleLang === 'function') {
                        log('âœ… toggleLang trouvÃ©', 'success');
                        
                        // Tester changement vers anglais
                        ontoWaveWindow.toggleLang('en');
                        log('ğŸ‡¬ğŸ‡§ Test changement vers anglais', 'success');
                        
                        setTimeout(() => {
                            // Tester changement vers franÃ§ais
                            ontoWaveWindow.toggleLang('fr');
                            log('ğŸ‡«ğŸ‡· Test changement vers franÃ§ais', 'success');
                        }, 1000);
                        
                    } else {
                        log('âŒ toggleLang non trouvÃ©', 'error');
                    }
                } catch (e) {
                    log('âš ï¸ Erreur: ' + e.message, 'warning');
                }
            }, 3000);
        }

        function openOntoWave() {
            log('ğŸŒŠ Ouverture d\'OntoWave...');
            window.open('http://localhost:8080/', '_blank');
        }

        function fixLanguageButtons() {
            log('ğŸ”§ Instructions de correction:', 'warning');
            log('1. Ouvrez la console sur http://localhost:8080/', 'warning');
            log('2. Cherchez les erreurs JavaScript', 'warning');
            log('3. VÃ©rifiez que toggleLang(\'fr\') et toggleLang(\'en\') fonctionnent', 'warning');
            log('4. VÃ©rifiez que OntoWave.instance.updateInterfaceTexts() existe', 'warning');
        }

        // Test automatique au chargement
        window.addEventListener('load', () => {
            log('ğŸš€ Diagnostic dÃ©marrÃ©');
            log('ğŸ“ Serveur OntoWave: http://localhost:8080/');
        });
    </script>
</body>
</html>
