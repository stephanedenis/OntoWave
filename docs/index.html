<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OntoWave - GÃ©nÃ©rateur de diagrammes pour sites statiques</title>
    
    <!-- Styles pour navigation multilingue -->
    <style>
    .lang-toggle {
        position: fixed;
        top: 120px;
        left: 20px;
        z-index: 999;
        display: flex;
        flex-direction: column;
        gap: 6px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 8px;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        border: 1px solid #e1e4e8;
    }

    .lang-toggle button {
        padding: 6px 10px;
        border: 1px solid #d0d7de;
        border-radius: 16px;
        background: white;
        cursor: pointer;
        font-size: 0.75em;
        min-width: 80px;
        text-align: center;
        transition: all 0.2s ease;
        white-space: nowrap;
    }

    .lang-toggle button:hover {
        background: #f8f9fa;
        transform: translateY(-1px);
    }

    .lang-toggle button.active {
        background: #0969da;
        color: white;
        border-color: #0969da;
    }

    .lang-content {
        transition: opacity 0.3s ease;
    }
    
    .lang-content.hidden {
        display: none !important;
    }
    
    .lang-content.visible {
        display: block !important;
    }
    </style>
</head>
<body>
    <!-- OntoWave chargera automatiquement index.md -->
    <script src="ontowave.min.js"></script>
    
    <!-- Script multilingue -->
    <script>
    // Attendre que OntoWave ait fini de charger le contenu
    document.addEventListener('DOMContentLoaded', function() {
        // Attendre un peu plus pour que OntoWave termine
        setTimeout(initializeMultilang, 2000);
    });
    
    function initializeMultilang() {
        console.log('ðŸŒ Initialisation du systÃ¨me multilingue');
        
        // VÃ©rifier que les Ã©lÃ©ments sont prÃ©sents
        const frDiv = document.getElementById('lang-fr');
        const enDiv = document.getElementById('lang-en');
        
        if (!frDiv || !enDiv) {
            console.log('âŒ Ã‰lÃ©ments de langue non trouvÃ©s, retry dans 1s');
            setTimeout(initializeMultilang, 1000);
            return;
        }
        
        console.log('âœ… Ã‰lÃ©ments de langue trouvÃ©s');
        
        // Masquer tous les contenus par dÃ©faut
        document.querySelectorAll('.lang-content').forEach(el => {
            el.classList.add('hidden');
            el.classList.remove('visible');
        });
        
        // CrÃ©er les boutons de navigation s'ils n'existent pas
        let langToggle = document.querySelector('.lang-toggle');
        if (!langToggle) {
            langToggle = document.createElement('div');
            langToggle.className = 'lang-toggle';
            langToggle.innerHTML = `
                <button onclick="toggleLang('fr')" id="btn-fr">ðŸ‡«ðŸ‡· FR</button>
                <button onclick="toggleLang('en')" id="btn-en">ðŸ‡¬ðŸ‡§ EN</button>
            `;
            document.body.appendChild(langToggle);
            console.log('âœ… Boutons de langue crÃ©Ã©s');
        }
        
        // Initialiser la langue
        const savedLang = localStorage.getItem('ontowave-lang') || detectLanguage();
        toggleLang(savedLang);
        
        // Forcer Prism Ã  recolorer aprÃ¨s le chargement du contenu
        if (window.Prism && window.Prism.highlightAll) {
            console.log('ðŸŽ¨ Recoloration Prism forcÃ©e');
            window.Prism.highlightAll();
        }
        
        // Recolorer encore aprÃ¨s un dÃ©lai au cas oÃ¹ le contenu se charge tardivement
        setTimeout(() => {
            if (window.Prism && window.Prism.highlightAll) {
                console.log('ðŸŽ¨ Recoloration Prism diffÃ©rÃ©e');
                window.Prism.highlightAll();
            }
        }, 1000);
    }

    // DÃ©tection automatique de la langue du navigateur
    function detectLanguage() {
        const userLang = navigator.language || navigator.userLanguage;
        return userLang.startsWith('fr') ? 'fr' : 'en';
    }

    // Fonction pour changer de langue
    function toggleLang(lang) {
        console.log('ðŸ”„ Bascule vers:', lang);
        
        // Masquer tous les contenus
        document.querySelectorAll('.lang-content').forEach(el => {
            el.classList.add('hidden');
            el.classList.remove('visible');
        });
        
        // Afficher le contenu de la langue sÃ©lectionnÃ©e
        const targetContent = document.getElementById('lang-' + lang);
        if (targetContent) {
            targetContent.classList.remove('hidden');
            targetContent.classList.add('visible');
        }
        
        // Mettre Ã  jour les boutons
        document.querySelectorAll('.lang-toggle button').forEach(btn => {
            btn.classList.remove('active');
        });
        const activeBtn = document.getElementById('btn-' + lang);
        if (activeBtn) {
            activeBtn.classList.add('active');
        }
        
        // Sauvegarder la prÃ©fÃ©rence
        localStorage.setItem('ontowave-lang', lang);
        
        // Recolorer Prism aprÃ¨s changement de langue
        setTimeout(() => {
            if (window.Prism && window.Prism.highlightAll) {
                window.Prism.highlightAll();
            }
        }, 100);
    }
    </script>
</body>
</html>
