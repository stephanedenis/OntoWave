<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OntoWave - Plugin System Demo</title>
</head>
<body>
  <!-- 
    Configuration OntoWave avec Plugins
    Philosophie : Tout dans le HTML, aucun fichier de configuration externe
  -->
  
  <!-- M√©thode 1: Configuration via data-plugins (recommand√©e) -->
  <div id="ontowave-container" 
       data-plugins='[
         {
           "name": "analytics",
           "enabled": true,
           "config": {
             "trackingId": "GA-XXXXXXXXX"
           }
         },
         {
           "name": "darkmode",
           "enabled": true,
           "config": {
             "auto": true
           }
         },
         {
           "name": "readingtime",
           "enabled": true
         }
       ]'>
  </div>

  <!-- M√©thode 2: Configuration via script JSON (alternative) -->
  <script type="application/json" id="ontowave-config">
  {
    "title": "OntoWave Plugin Demo",
    "defaultPage": "index.md",
    "plugins": [
      {
        "name": "analytics",
        "enabled": true,
        "config": {
          "trackingId": "GA-XXXXXXXXX"
        }
      },
      {
        "name": "darkmode",
        "enabled": true,
        "config": {
          "auto": true
        }
      },
      {
        "name": "readingtime",
        "enabled": true
      }
    ]
  }
  </script>

  <!-- M√©thode 3: Configuration via window.ontoWaveConfig (alternative) -->
  <script>
    window.ontoWaveConfig = {
      title: "OntoWave Plugin Demo",
      defaultPage: "index.md",
      plugins: [
        {
          name: "analytics",
          enabled: true,
          config: {
            trackingId: "GA-XXXXXXXXX"
          }
        },
        {
          name: "darkmode", 
          enabled: true,
          config: {
            auto: true
          }
        },
        {
          name: "readingtime",
          enabled: true
        }
      ]
    };
  </script>

  <!-- 
    OntoWave avec syst√®me de plugins int√©gr√©
    Philosophie : Un seul fichier .min.js contient tout
  -->
  <script src="../dist/ontowave.min.js"></script>
  
  <!-- Initialisation OntoWave avec plugins -->
  <script>
    // OntoWave d√©tecte et active automatiquement les plugins configur√©s
    document.addEventListener('DOMContentLoaded', async () => {
      const app = new OntoWave({
        containerId: 'ontowave-container'
      });
      
      // Le syst√®me de plugins est automatiquement initialis√©
      await app.init();
      
      console.log('üîå OntoWave avec plugins initialis√© !');
      console.log('üîå Plugins actifs:', app.pluginManager?.getActivePlugins());
    });
  </script>

  <!-- Exemple de contenu Markdown -->
  <script type="text/markdown" data-src="index.md">
# Demo du Syst√®me de Plugins OntoWave

## Fonctionnalit√©s Actives

### üìä Plugin Analytics
- Suivi automatique des pages visit√©es
- Tracking des clics sur liens externes  
- Analyse des interactions avec les diagrammes

### üåô Plugin Dark Mode
- Basculement automatique clair/sombre
- D√©tection des pr√©f√©rences syst√®me
- Sauvegarde des pr√©f√©rences utilisateur
- Bouton de basculement en haut √† droite

### üìñ Plugin Reading Time  
- Calcul automatique du temps de lecture
- Comptage des mots
- Affichage multilingue (FR/EN)

## Architecture du Syst√®me

Le syst√®me de plugins OntoWave respecte la philosophie **"un fichier, tout dans le HTML"** :

1. **Configuration HTML uniquement** - Pas de fichiers .json externes
2. **Plugins int√©gr√©s** dans le .min.js 
3. **Auto-enregistrement** des plugins disponibles
4. **Chargement dynamique** selon la configuration

## Exemples de Configuration

### Via data-plugins (Recommand√©)
```html
<div id="ontowave-container" 
     data-plugins='[{"name":"analytics","enabled":true}]'>
</div>
```

### Via window.ontoWaveConfig  
```javascript
window.ontoWaveConfig = {
  plugins: [
    { name: "darkmode", enabled: true }
  ]
};
```

### Via script JSON
```html
<script type="application/json" id="ontowave-config">
{
  "plugins": [{"name":"readingtime","enabled":true}]
}
</script>
```

## D√©veloppement de Plugins

Les plugins OntoWave sont int√©gr√©s directement dans le code source et s'auto-enregistrent :

```typescript
class MonPlugin implements OntoWavePlugin {
  readonly name = 'monplugin';
  readonly version = '1.0.0';
  enabled = false;

  async initialize(context: PluginContext): Promise<void> {
    // Initialisation du plugin
    context.hooks.afterPageRender((element: HTMLElement) => {
      // Actions apr√®s rendu
    });
  }

  async destroy(): Promise<void> {
    // Nettoyage
  }
}

// Auto-enregistrement
PluginRegistry.register(new MonPlugin());
```

## Hooks Disponibles

- `beforePageRender` - Avant le rendu d'une page
- `afterPageRender` - Apr√®s le rendu d'une page  
- `beforeInit` - Avant l'initialisation OntoWave
- `afterInit` - Apr√®s l'initialisation OntoWave

Cette approche garantit la simplicit√© et la coh√©rence de OntoWave !
  </script>

</body>
</html>