(d=>{let t={title:"OntoWave Documentation",baseUrl:"/",defaultPage:"index.md",containerId:"ontowave-container",mermaid:{theme:"default",startOnLoad:!0,flowchart:{useMaxWidth:!0},sequence:{useMaxWidth:!0},gantt:{useMaxWidth:!0},journey:{useMaxWidth:!0}},plantuml:{server:"https://www.plantuml.com/plantuml",format:"svg"},prism:{theme:"default",autoload:!0},navigation:{showHome:!0,showBreadcrumb:!0,showToc:!0},ui:{theme:"default",responsive:!0,animations:!0}};class e{constructor(e={}){this.config={...t,...e},this.container=null,this.mermaidLoaded=!1,this.prismLoaded=!1,this.currentPage=null,console.log("üåä OntoWave initialized with config:",this.config)}async init(){try{await this.loadConfigFromScript(),this.injectStyles(),await this.loadMermaid(),await this.loadPrism(),this.createInterface(),this.initializeNavigation(),await this.loadInitialPage(),console.log("‚úÖ OntoWave successfully initialized")}catch(e){console.error("‚ùå OntoWave initialization failed:",e),this.showError("Erreur d'initialisation OntoWave: "+e.message)}}async loadConfigFromScript(){var e=document.getElementById("ontowave-config");if(e&&"application/json"===e.type)try{var t=JSON.parse(e.textContent);this.config={...this.config,...t},console.log("üìÑ Configuration loaded from script tag")}catch(e){console.warn("‚ö†Ô∏è Invalid JSON in ontowave-config script tag:",e)}}injectStyles(){var e=document.createElement("style");e.textContent=`
    .ontowave-container {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
      line-height: 1.6;
      color: #24292e;
      background: #fff;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    
    /* Menu flottant minimal d√©pla√ßable */
    .ontowave-floating-menu {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid #e1e4e8;
      border-radius: 44px;
      padding: 10px;
      box-shadow: 0 4px 12px rgba(27,31,35,0.15);
      cursor: move;
      transition: all 0.3s ease;
      font-size: 1.2em;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 0;
      width: 44px;
      height: 44px;
      overflow: visible;
      white-space: nowrap;
    }
    
    .ontowave-floating-menu.expanded {
      width: auto;
      height: auto;
      min-height: 44px;
      border-radius: 22px;
      padding: 10px 18px;
      gap: 10px;
    }
    
    .ontowave-floating-menu:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(27,31,35,0.25);
    }
    
    .ontowave-menu-icon {
      cursor: pointer;
      transition: transform 0.3s ease;
      flex-shrink: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4em;
      text-align: center;
      line-height: 1;
      margin: 0 auto;
    }
    
    .ontowave-menu-icon:hover {
      transform: scale(1.2);
    }
    
    .ontowave-menu-content {
      display: flex;
      align-items: center;
      gap: 15px;
      opacity: 0;
      width: 0;
      overflow: hidden;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    
    .ontowave-floating-menu.expanded .ontowave-menu-content {
      opacity: 1;
      width: auto;
      overflow: visible;
    }
    
    .ontowave-menu-brand {
      font-weight: 600;
      color: #0969da;
      text-decoration: none;
      cursor: pointer;
      font-size: 0.9em;
    }
    
    .ontowave-menu-brand:hover {
      color: #0550ae;
    }
    
    .ontowave-menu-options {
      display: flex;
      gap: 8px;
      flex-wrap: nowrap;
    }
    
    .ontowave-menu-option {
      padding: 6px 10px;
      background: #f8f9fa;
      border: 1px solid #d0d7de;
      border-radius: 15px;
      font-size: 0.75em;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
    }
    
    .ontowave-menu-option:hover {
      background: #e2e8f0;
      transform: translateY(-1px);
    }
    
    /* Pas d'en-t√™te - supprim√© */
    .ontowave-header {
      display: none;
    }
    
    .ontowave-nav {
      background: #f8f9fa;
      border: 1px solid #e1e4e8;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .ontowave-nav h3 {
      margin: 0 0 1rem 0;
      color: #24292e;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .ontowave-nav-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
    }
    
    .ontowave-nav-item {
      padding: 1rem;
      background: white;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      text-decoration: none;
      color: #24292e;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.2s ease;
      font-weight: 500;
      cursor: pointer;
    }
    
    .ontowave-nav-item:hover {
      background: #f3f4f6;
      border-color: #0969da;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(27,31,35,0.15);
    }
    
    .ontowave-content {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(27,31,35,0.15);
      border: 1px solid #e1e4e8;
      margin-bottom: 2rem;
      min-height: 300px;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
    }
    
    /* Headers corrig√©s */
    .ontowave-content h1 {
      color: #24292e;
      border-bottom: 2px solid #e1e4e8;
      padding-bottom: 8px;
      margin-bottom: 16px;
      font-size: 2em;
      font-weight: 600;
    }
    
    .ontowave-content h2 {
      color: #24292e;
      margin-top: 24px;
      margin-bottom: 16px;
      font-size: 1.5em;
      font-weight: 600;
    }
    
    .ontowave-content h3 {
      color: #24292e;
      margin-top: 20px;
      margin-bottom: 12px;
      font-size: 1.25em;
      font-weight: 600;
    }
    
    /* S√©parateurs hr */
    .ontowave-content hr {
      border: none;
      border-top: 1px solid #e1e4e8;
      margin: 24px 0;
    }
    
    /* Mermaid diagrams */
    .ontowave-mermaid {
      margin: 20px 0;
      padding: 20px;
      background: #f8f9fa;
      border: 1px solid #e1e4e8;
      border-radius: 8px;
      text-align: center;
    }
    
    .ontowave-loading {
      text-align: center;
      color: #666;
      padding: 2rem;
    }
    
    .ontowave-error {
      color: #d73a49;
      text-align: center;
      padding: 2rem;
      background: #ffeef0;
      border: 1px solid #fdaeb7;
      border-radius: 6px;
    }
    
    .ontowave-mermaid {
      background: #f6f8fa;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      padding: 1rem;
      margin: 1rem 0;
      text-align: center;
    }
    
    .ontowave-plantuml {
      background: #f6f8fa;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      padding: 1rem;
      margin: 1rem 0;
      text-align: center;
    }
    
    .ontowave-plantuml img {
      max-width: 100%;
      height: auto;
    }
    
    .ontowave-code {
      background: #f6f8fa;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      padding: 1rem;
      margin: 1rem 0;
      overflow-x: auto;
      font-family: ui-monospace, SFMono-Regular, monospace;
    }
    
    .ontowave-breadcrumb {
      padding: 0.5rem 0;
      margin-bottom: 1rem;
      border-bottom: 1px solid #e1e4e8;
    }
    
    .ontowave-breadcrumb a {
      color: #0969da;
      text-decoration: none;
      margin-right: 0.5rem;
    }
    
    .ontowave-breadcrumb a:hover {
      text-decoration: underline;
    }
    
    .ontowave-breadcrumb span {
      color: #656d76;
      margin-right: 0.5rem;
    }
    
    .ontowave-status {
      background: #d4edda;
      border: 1px solid #c3e6cb;
      border-radius: 8px;
      padding: 1rem;
      margin-top: 2rem;
    }
    
    .ontowave-status h4 {
      margin: 0 0 0.5rem 0;
      color: #155724;
    }
    
    .ontowave-status ul {
      margin: 0;
      padding-left: 1.5rem;
      color: #155724;
    }
    
    @media (max-width: 768px) {
      .ontowave-header {
        padding: 1rem;
      }
      
      .ontowave-header h1 {
        font-size: 2em;
      }
      
      .ontowave-nav-grid {
        grid-template-columns: 1fr;
      }
      
      .ontowave-content {
        padding: 1rem;
      }
    }
  `,document.head.appendChild(e)}async loadMermaid(){return new Promise(e=>{var t;d.mermaid?(this.mermaidLoaded=!0,this.initializeMermaid(),e()):((t=document.createElement("script")).src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js",t.onload=()=>{this.mermaidLoaded=!0,this.initializeMermaid(),e()},t.onerror=()=>{console.warn("‚ö†Ô∏è Failed to load Mermaid library"),e()},document.head.appendChild(t))})}initializeMermaid(){d.mermaid&&(d.mermaid.initialize(this.config.mermaid),console.log("üé® Mermaid initialized"))}async loadPrism(){return new Promise(n=>{if(d.Prism)return this.prismLoaded=!0,console.log("üé® Prism already loaded"),n();var e=document.createElement("link"),e=(e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css",document.head.appendChild(e),document.createElement("script"));e.src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js",e.onload=()=>{let o=["markup","css","javascript","python","java","bash","json","yaml"],a=0;o.forEach(e=>{var t=document.createElement("script");t.src=`https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-${e}.min.js`,t.onload=()=>{++a===o.length&&(this.prismLoaded=!0,console.log("üé® Prism initialized with languages:",o),n())},t.onerror=()=>{++a===o.length&&(this.prismLoaded=!0,n())},document.head.appendChild(t)})},e.onerror=()=>{console.warn("‚ö†Ô∏è Failed to load Prism library"),n()},document.head.appendChild(e)})}createInterface(){this.container=document.getElementById(this.config.containerId),this.container||(this.container=document.createElement("div"),this.container.id=this.config.containerId,document.body.appendChild(this.container)),this.container.className="ontowave-container",this.container.innerHTML=`
        <div class="ontowave-floating-menu" id="ontowave-floating-menu" title="OntoWave Menu">
          <span class="ontowave-menu-icon" id="ontowave-menu-icon">&#127754;</span>
          <div class="ontowave-menu-content" id="ontowave-menu-content">
            <a href="https://ontowave.com/" target="_blank" class="ontowave-menu-brand">OntoWave</a>
            <div class="ontowave-menu-options">
              <span class="ontowave-menu-option" onclick="window.OntoWave.loadPage('index.md')">üè† Accueil</span>
              <span class="ontowave-menu-option" onclick="window.location.href='gallery.html'">üé® Galerie</span>
            </div>
          </div>
        </div>
        
        <div class="ontowave-content" id="ontowave-content">
          <div class="ontowave-loading">‚è≥ Chargement du contenu...</div>
        </div>
        
        <div class="ontowave-status" style="display: none;">
          <h4>‚úÖ OntoWave Package Actif</h4>
          <ul>
            <li><strong>Chargement rapide:</strong> Syst√®me int√©gr√©</li>
            <li><strong>Mermaid:</strong> ${this.mermaidLoaded?"Charg√©":"Non disponible"}</li>
            <li><strong>Prism:</strong> ${this.prismLoaded?"Charg√©":"Non disponible"}</li>
            <li><strong>PlantUML:</strong> Support int√©gr√©</li>
            <li><strong>Navigation:</strong> Hash pr√©serv√©</li>
          </ul>
        </div>
      `}initializeNavigation(){d.addEventListener("hashchange",()=>{var e=location.hash.replace("#","")||this.config.defaultPage;this.loadPage(e)}),this.createDefaultNavigation(),this.initializeFloatingMenu()}initializeFloatingMenu(){let r=document.getElementById("ontowave-floating-menu");var e=document.getElementById("ontowave-menu-icon");if(r&&e){let t=!1,n=!1,i={x:0,y:0};e.addEventListener("click",e=>{e.stopPropagation(),(t=!t)?r.classList.add("expanded"):r.classList.remove("expanded")}),document.addEventListener("click",e=>{!r.contains(e.target)&&t&&(t=!1,r.classList.remove("expanded"))}),r.addEventListener("mousedown",e=>{var t;e.target.closest("a, .ontowave-menu-option")||(n=!0,t=r.getBoundingClientRect(),i.x=e.clientX-t.left,i.y=e.clientY-t.top,r.style.cursor="grabbing",document.body.style.userSelect="none")}),document.addEventListener("mousemove",e=>{var t,o,a;n&&(t=e.clientX-i.x,e=e.clientY-i.y,o=d.innerWidth-r.offsetWidth,a=d.innerHeight-r.offsetHeight,r.style.left=Math.max(0,Math.min(o,t))+"px",r.style.top=Math.max(0,Math.min(a,e))+"px")}),document.addEventListener("mouseup",()=>{n&&(n=!1,r.style.cursor="move",document.body.style.userSelect="")}),r.addEventListener("touchstart",e=>{var t;e.target.closest("a, .ontowave-menu-option")||(e=e.touches[0],t=r.getBoundingClientRect(),i.x=e.clientX-t.left,i.y=e.clientY-t.top,n=!0)}),document.addEventListener("touchmove",e=>{var t,o,a;n&&(e.preventDefault(),t=(e=e.touches[0]).clientX-i.x,e=e.clientY-i.y,o=d.innerWidth-r.offsetWidth,a=d.innerHeight-r.offsetHeight,r.style.left=Math.max(0,Math.min(o,t))+"px",r.style.top=Math.max(0,Math.min(a,e))+"px")}),document.addEventListener("touchend",()=>{n=!1})}}createDefaultNavigation(){var e=document.getElementById("ontowave-nav-grid");e&&(e.innerHTML=[{href:"index.md",icon:"üè†",label:"Accueil"},{href:"en/index.md",icon:"üá¨üáß",label:"English"},{href:"fr/index.md",icon:"üá´üá∑",label:"Fran√ßais"},{href:"demo/mermaid.md",icon:"üé®",label:"D√©mo Mermaid"},{href:"demo/plantuml.md",icon:"üìä",label:"PlantUML"},{href:"demo/advanced-shapes.md",icon:"üéØ",label:"Formes Avanc√©es"}].map(e=>`
        <a href="#${e.href}" class="ontowave-nav-item" onclick="window.OntoWave.loadPage('${e.href}')">
          ${e.icon} ${e.label}
        </a>
      `).join(""))}async loadInitialPage(){var e=location.hash.replace("#","")||this.config.defaultPage;await this.loadPage(e)}async loadPage(t){var e=document.getElementById("ontowave-content");if(e){console.log("üìÑ Loading page:",t),this.currentPage=t,location.hash!=="#"+t&&(location.hash="#"+t),this.updateBreadcrumb(t),e.innerHTML='<div class="ontowave-loading">‚è≥ Chargement de '+t+"...</div>";try{var o=await fetch(this.config.baseUrl+t);if(!o.ok)throw new Error(`HTTP ${o.status}: `+o.statusText);var a=await o.text(),n=(console.log("‚úÖ Content loaded:",a.length,"characters"),await this.renderMarkdown(a));e.innerHTML=n,await this.processDiagrams(e),await this.processPrism(e)}catch(e){console.error("‚ùå Failed to load page:",e),this.showError(`Impossible de charger ${t}: `+e.message)}}}updateBreadcrumb(e){var t=document.getElementById("ontowave-breadcrumb");if(t&&this.config.navigation.showBreadcrumb){let o=e.split("/"),a=['<a href="#'+this.config.defaultPage+'">üè† Accueil</a>'],n="";o.forEach((e,t)=>{t===o.length-1?a.push("<span>"+e.replace(".md","")+"</span>"):(n+=(n?"/":"")+e,a.push('<a href="#'+n+'/index.md">'+e+"</a>"))}),t.innerHTML=a.join(" <span>‚Ä∫</span> "),t.style.display="block"}}async renderMarkdown(e){let o=e,r=[];return o=(o=o.replace(/```(\w+)([\s\S]*?)```/g,(e,t,o)=>{var a,n,o=o.trim(),i=`__CODE_BLOCK_${r.length}__`;return"mermaid"===t?(n="mermaid-"+Math.random().toString(36).substr(2,9),r.push(`<div class="ontowave-mermaid mermaid" id="${n}">${o}</div>`)):"plantuml"===t?(n="plantuml-"+Math.random().toString(36).substr(2,9),a=`${this.config.plantuml.server}/${this.config.plantuml.format}/~1`+encodeURIComponent(o),r.push(`<div class="ontowave-plantuml" id="${n}">
            <div style="margin-bottom: 8px; font-weight: bold; color: #586069;">üìä Diagramme PlantUML</div>
            <img src="${a}" alt="Diagramme PlantUML" style="max-width: 100%; height: auto;" 
                 onerror="this.parentElement.innerHTML='<div style=\\'color: #d73a49; padding: 20px;\\'>‚ùå Erreur de rendu PlantUML</div>'" />
          </div>`)):(n=this.prismLoaded?"language-"+t:"",r.push(`<pre class="ontowave-code"><code class="${n}">${o}</code></pre>`)),i})).replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/^---+$/gm,"<hr>").replace(/\[([^\]]+)\]\(([^)]+\.html[^)]*)\)/g,'<a href="$2">$1</a>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="#$2" onclick="window.OntoWave.loadPage(\'$2\')">$1</a>').replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`([^`]+)`/g,"<code>$1</code>").split("\n\n").map(e=>e.trim()).filter(e=>0<e.length).map(e=>e.match(/^<(h[1-6]|hr|div|pre)/)?e:`<p>${e.replace(/\n/g,"<br>")}</p>`).join("\n"),r.forEach((e,t)=>{o=o.replace(`__CODE_BLOCK_${t}__`,e)}),o}async processDiagrams(t){if(this.mermaidLoaded&&d.mermaid){let o=t.querySelectorAll(".mermaid");if(0!==o.length){console.log("üé® Processing",o.length,"Mermaid diagrams");try{o.forEach(e=>{e.removeAttribute("data-processed")}),await d.mermaid.run(),console.log("‚úÖ Mermaid diagrams rendered successfully"),setTimeout(()=>{var e=t.querySelectorAll(".mermaid svg");console.log("üé® SVG elements found:",e.length),0===e.length&&0<o.length&&(console.log("‚ö†Ô∏è Retrying Mermaid rendering..."),o.forEach(e=>{e.removeAttribute("data-processed")}),d.mermaid.init(void 0,o))},1e3)}catch(t){console.error("‚ùå Mermaid rendering error:",t),o.forEach(e=>{e.querySelector("svg")||(e.innerHTML=`<div style="color: #d73a49; padding: 10px;">‚ùå Erreur de rendu Mermaid: ${t.message}</div><pre style="background: #f8f8f8; padding: 10px; margin-top: 10px; border-radius: 4px;"><code>${e.textContent}</code></pre>`)})}}}}async processPrism(e){if(this.prismLoaded&&d.Prism)try{var t=e.querySelectorAll('code[class*="language-"]');console.log("üé® Found",t.length,"code blocks for Prism highlighting"),0<t.length&&(d.Prism.highlightAllUnder(e),console.log("‚úÖ Prism syntax highlighting applied"))}catch(e){console.error("‚ùå Prism highlighting error:",e)}else console.log("üé® Prism not loaded, skipping syntax highlighting")}showError(e){var t=document.getElementById("ontowave-content");t&&(t.innerHTML=`<div class="ontowave-error">‚ùå ${e}</div>`)}navigate(e){this.loadPage(e)}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e},console.log("üìù Configuration updated")}}document.addEventListener("DOMContentLoaded",()=>{d.OntoWave=new e,d.OntoWave.init()}),d.OntoWaveClass=e})(window);