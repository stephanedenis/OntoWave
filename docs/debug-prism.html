<!DOCTYPE html>
<html>
<head>
    <title>Debug Prism</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
        pre { background: #f5f5f5; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Debug Prism OntoWave</h1>
    
    <div class="test-section">
        <h2>1. OntoWave chargé ?</h2>
        <div id="ontowave-status">En attente...</div>
    </div>
    
    <div class="test-section">
        <h2>2. Prism chargé ?</h2>
        <div id="prism-status">En attente...</div>
    </div>
    
    <div class="test-section">
        <h2>3. Langages Prism disponibles ?</h2>
        <div id="prism-languages">En attente...</div>
    </div>
    
    <div class="test-section">
        <h2>4. Test HTML code block</h2>
        <pre><code class="language-html">&lt;div&gt;Hello World&lt;/div&gt;</code></pre>
    </div>
    
    <div class="test-section">
        <h2>5. Console logs</h2>
        <div id="console-logs"></div>
    </div>

    <!-- OntoWave -->
    <script src="ontowave.min.js"></script>
    
    <script>
        // Capture console.log
        const originalLog = console.log;
        const logs = [];
        console.log = function(...args) {
            logs.push(args.join(' '));
            originalLog.apply(console, arguments);
            updateConsoleLogs();
        };
        
        function updateConsoleLogs() {
            document.getElementById('console-logs').innerHTML = 
                logs.slice(-10).map(log => `<div>${log}</div>`).join('');
        }
        
        function checkStatus() {
            // OntoWave
            document.getElementById('ontowave-status').innerHTML = 
                typeof window.OntoWave !== 'undefined' ? '✅ OntoWave chargé' : '❌ OntoWave non chargé';
            
            // Prism
            document.getElementById('prism-status').innerHTML = 
                typeof window.Prism !== 'undefined' ? '✅ Prism chargé' : '❌ Prism non chargé';
            
            // Langages
            if (typeof window.Prism !== 'undefined' && window.Prism.languages) {
                const languages = Object.keys(window.Prism.languages);
                document.getElementById('prism-languages').innerHTML = 
                    '✅ Langages: ' + languages.join(', ');
            } else {
                document.getElementById('prism-languages').innerHTML = 
                    '❌ Pas de langages Prism';
            }
        }
        
        // Vérifier toutes les 500ms pendant 10 secondes
        let checks = 0;
        const interval = setInterval(() => {
            checkStatus();
            checks++;
            if (checks > 20) clearInterval(interval);
        }, 500);
    </script>
</body>
</html>
