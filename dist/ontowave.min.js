(d=>{let o={fr:{menuHome:"Accueil",menuGallery:"Galerie",menuConfiguration:"Configuration",configTitle:"OntoWave - Configuration ComplÃ¨te",configGeneral:"GÃ©nÃ©ral",configSiteTitle:"Titre du site :",configDefaultPage:"Page par dÃ©faut :",configBaseUrl:"URL de base :",configLanguages:"Langues et Localisation",configSupportedLanguages:"Langues supportÃ©es (sÃ©parÃ©es par des virgules) :",configFallbackLanguage:"Langue de fallback :",configNavigation:"Navigation et Interface",configShowGallery:"Afficher la galerie d'exemples",configHomeButton:"Bouton Accueil",configBreadcrumb:"Fil d'Ariane (breadcrumb)",configToc:"Table des matiÃ¨res",configMermaid:"Diagrammes Mermaid",configMermaidTheme:"ThÃ¨me Mermaid :",configMermaidAuto:"DÃ©marrage automatique",configMermaidMaxWidth:"Utiliser la largeur maximale",configPlantuml:"Diagrammes PlantUML",configPlantumlServer:"Serveur PlantUML :",configPlantumlFormat:"Format de sortie :",configPrism:"Coloration Syntaxique (Prism.js)",configPrismTheme:"ThÃ¨me Prism :",configPrismAutoload:"Chargement automatique",configUI:"Interface Utilisateur",configUITheme:"ThÃ¨me de l'interface :",configUIResponsive:"Design responsive",configUIAnimations:"Animations et transitions",configApply:"Appliquer Configuration",configDownloadHTML:"TÃ©lÃ©charger HTML",configDownloadJS:"TÃ©lÃ©charger ontowave.min.js",configReset:"RÃ©initialiser",configLanguageNote:"Laissez vide pour un site monolingue"},en:{menuHome:"Home",menuGallery:"Gallery",menuConfiguration:"Configuration",configTitle:"OntoWave - Complete Configuration",configGeneral:"General",configSiteTitle:"Site title:",configDefaultPage:"Default page:",configBaseUrl:"Base URL:",configLanguages:"Languages and Localization",configSupportedLanguages:"Supported languages (comma separated):",configFallbackLanguage:"Fallback language:",configNavigation:"Navigation and Interface",configShowGallery:"Show examples gallery",configHomeButton:"Home button",configBreadcrumb:"Breadcrumb navigation",configToc:"Table of contents",configMermaid:"Mermaid Diagrams",configMermaidTheme:"Mermaid theme:",configMermaidAuto:"Auto start",configMermaidMaxWidth:"Use maximum width",configPlantuml:"PlantUML Diagrams",configPlantumlServer:"PlantUML server:",configPlantumlFormat:"Output format:",configPrism:"Syntax Highlighting (Prism.js)",configPrismTheme:"Prism theme:",configPrismAutoload:"Auto loading",configUI:"User Interface",configUITheme:"Interface theme:",configUIResponsive:"Responsive design",configUIAnimations:"Animations and transitions",configApply:"Apply Configuration",configDownloadHTML:"Download HTML",configDownloadJS:"Download ontowave.min.js",configReset:"Reset",configLanguageNote:"Leave empty for monolingual site"}},t={title:"OntoWave Documentation",baseUrl:"/",defaultPage:"index.md",containerId:"ontowave-container",locales:["fr","en"],fallbackLocale:"en",showGallery:!1,mermaid:{theme:"default",startOnLoad:!0,flowchart:{useMaxWidth:!0},sequence:{useMaxWidth:!0},gantt:{useMaxWidth:!0},journey:{useMaxWidth:!0}},plantuml:{server:"https://www.plantuml.com/plantuml",format:"svg"},prism:{theme:"default",autoload:!0},navigation:{showHome:!0,showBreadcrumb:!0,showToc:!0},ui:{theme:"default",responsive:!0,animations:!0,languageButtons:"menu"}};class n{constructor(e={}){this.config={...t,...e},e.i18n&&(e.i18n.supported&&(this.config.locales=e.i18n.supported),e.i18n.default)&&(this.config.fallbackLocale=e.i18n.default),this.container=null,this.mermaidLoaded=!1,this.prismLoaded=!1,this.currentPage=null,this.currentLanguage=null,this.svgCache=new Map,this.svgCacheTTL=3e5,this.svgCacheEnabled=!1!==e.svgCache}getCachedSVG(e){var t;return this.svgCacheEnabled&&(t=this.svgCache.get(e))?Date.now()-t.timestamp>this.svgCacheTTL?(this.svgCache.delete(e),null):(console.log("âœ… SVG rÃ©cupÃ©rÃ© du cache:",e),t.svg):null}cacheSVG(e,t){this.svgCacheEnabled&&(this.svgCache.set(e,{svg:t,timestamp:Date.now()}),console.log("ğŸ’¾ SVG mis en cache:",e,`(${this.svgCache.size} entrÃ©es)`))}clearSVGCache(){var e=this.svgCache.size;this.svgCache.clear(),console.log(`ğŸ—‘ï¸ Cache SVG vidÃ© (${e} entrÃ©es supprimÃ©es)`)}getCurrentLanguage(){if(this.currentLanguage)return this.currentLanguage;var e=document.getElementById("lang-fr"),t=document.getElementById("lang-en");if(e&&t){if(e.classList.contains("visible")||!e.classList.contains("hidden")&&"none"!==e.style.display)return"fr";if(t.classList.contains("visible")||!t.classList.contains("hidden")&&"none"!==t.style.display)return"en"}e=document.getElementById("btn-fr"),t=document.getElementById("btn-en");if(e&&t){if(e.classList.contains("active"))return"fr";if(t.classList.contains("active"))return"en"}return this.resolveLocale()||"en"}t(e,t=null){t=t||this.getCurrentLanguage();return(o[t]||o.en)[e]||e}updateInterfaceTexts(e=null){let t=e||this.getCurrentLanguage();console.log("ğŸŒ Interface texts updating for language:",t);e=document.querySelector('.ontowave-menu-option[onclick*="goHome"]'),e&&(e.innerHTML="ğŸ  "+this.t("menuHome",t)),e=document.querySelector('.ontowave-menu-option[onclick*="gallery.html"]'),e&&(e.innerHTML="ğŸ¨ "+this.t("menuGallery",t)),e=document.querySelector('.ontowave-menu-option[onclick*="toggleConfigurationPanel"]'),e&&(e.innerHTML="âš™ï¸ "+this.t("menuConfiguration",t)),e=document.getElementById("ontowave-config-panel");if(e){let n=document.getElementById("config-title-full")?.value||this.config.title,a=document.getElementById("config-defaultPage-full")?.value||this.config.defaultPage,i=document.getElementById("config-baseUrl-full")?.value||this.config.baseUrl;e.remove();e=document.querySelector('.ontowave-menu-option[onclick*="toggleConfigurationPanel"]');e&&e.classList.remove("selected"),setTimeout(()=>{this.toggleConfigurationPanel(null,t),setTimeout(()=>{var e=document.getElementById("config-title-full"),t=document.getElementById("config-defaultPage-full"),o=document.getElementById("config-baseUrl-full");e&&(e.value=n),t&&(t.value=a),o&&(o.value=i)},100)},50)}console.log("ğŸŒ Interface texts updated for language:",t)}switchLanguage(e){this.currentLanguage=e,this.updateLanguageButtonsState(e),this.updateInterfaceTexts(e);e=(this.config.sources||{})[e]||this.config.defaultPage;e&&this.loadPage(e)}updateLanguageButtonsState(e=null){let t=e||this.getCurrentLanguage();document.querySelectorAll(".ontowave-lang-btn").forEach(e=>{e.classList.remove("active"),e.textContent.includes(t.toUpperCase())&&e.classList.add("active")}),document.querySelectorAll(".ontowave-fixed-lang-btn").forEach(e=>{e.classList.remove("active"),e.textContent.includes(t.toUpperCase())&&e.classList.add("active")}),console.log("ğŸŒ Ã‰tat des boutons de langue mis Ã  jour pour:",t)}goHome(){var e=this.getCurrentLanguage(),e=(this.config.sources||{})[e]||this.config.defaultPage;this.loadPage(e)}getBrowserLocales(){var e=[];return navigator.languages&&e.push(...navigator.languages),navigator.language&&e.push(navigator.language),navigator.userLanguage&&e.push(navigator.userLanguage),[...new Set(e)]}resolveLocale(){var e=this.getBrowserLocales(),o=this.config.locales||[],t=this.config.defaultLocale||this.config.fallbackLocale;if(console.log("ğŸŒ Browser locales:",e),console.log("ğŸŒ Supported locales:",o),console.log("ğŸŒ Default locale:",t),0===o.length)return null;var n,a,i,l=d.location.hash||d.location.pathname;console.log("ğŸ” Current URL:",l);for(n of o)if(new RegExp(`\\.${n}\\.(md|html)`).test(l))return console.log("ğŸ¯ Page language detected from URL:",n,"in",l),n;for(a of e)if(o.includes(a))return console.log("ğŸ¯ Exact browser match found:",a),a;for(i of e){var r;i.split("-")[0];for(r of e){let t=r.split("-")[0];var s=o.find(e=>e.startsWith(t));if(s)return console.log("ğŸ¯ Prefix match found:",r,"->",s),s}if(t&&o.includes(t))return console.log("ğŸ¯ Using configured default locale:",t),t}var c=o[0];return console.log("ğŸ¯ Using fallback locale:",c),c}isMultilingualMode(){return this.config.locales&&0<this.config.locales.length&&this.config.sources}generatePageCandidates(e){var t,o=this.resolveLocale(),n=[];return o?(t=e.replace(/\.md$/,""),n.push(t+`.${o}.md`),o.includes("-")&&(o=o.split("-")[0],n.push(t+`.${o}.md`)),n.push(e),console.log("ğŸ“„ Page candidates for",e,":",n)):n.push(e),n}async init(){try{await this.loadConfigFromScript(),this.injectStyles(),await this.loadMermaid(),await this.loadPrism(),this.createInterface(),this.currentLanguage=this.resolveLocale(),this.initializeNavigation(),this.updateLanguageButtonsState(),await this.loadInitialPage(),console.log("âœ… OntoWave successfully initialized")}catch(e){console.error("âŒ OntoWave initialization failed:",e),this.showError("Erreur d'initialisation OntoWave: "+e.message)}}async loadConfigFromScript(){if(d.ontoWaveConfig)this.config={...this.config,...d.ontoWaveConfig},console.log("ğŸ“„ Configuration loaded from window.ontoWaveConfig"),console.log("ğŸ“„ Final config:",this.config);else{var e=document.getElementById("ontowave-config");if(e&&"application/json"===e.type)try{var t=JSON.parse(e.textContent);this.config={...this.config,...t},console.log("ğŸ“„ Configuration loaded from script tag"),console.log("ğŸ“„ Final config:",this.config)}catch(e){console.warn("âš ï¸ Invalid JSON in ontowave-config script tag:",e)}}}injectStyles(){var e=document.createElement("style");e.textContent=`
    .ontowave-container {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
      line-height: 1.6;
      color: #24292e;
      background: #fff;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    
    
    .ontowave-floating-menu {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid #e1e4e8;
      border-radius: 44px;
      padding: 10px;
      box-shadow: 0 4px 12px rgba(27,31,35,0.15);
      cursor: move;
      transition: all 0.3s ease;
      font-size: 1.2em;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 0;
      width: 44px;
      height: 44px;
      overflow: visible;
      white-space: nowrap;
    }
    
    .ontowave-floating-menu.no-drag {
      cursor: default;
    }
    
    .ontowave-floating-menu.expanded {
      width: auto;
      height: auto;
      min-height: 44px;
      border-radius: 22px;
      padding: 10px 18px;
      gap: 10px;
    }
    
    .ontowave-floating-menu:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(27,31,35,0.25);
    }
    
    
    .ontowave-floating-menu.has-config-panel:hover {
      transform: none;
    }
    
    .ontowave-menu-icon {
      cursor: pointer;
      transition: transform 0.3s ease;
      flex-shrink: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4em;
      text-align: center;
      line-height: 1;
      margin: 0 auto;
    }
    
    .ontowave-menu-icon:hover {
      transform: scale(1.2);
    }
    
    .ontowave-menu-content {
      display: flex;
      align-items: center;
      gap: 15px;
      opacity: 0;
      width: 0;
      overflow: hidden;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    
    .ontowave-floating-menu.expanded .ontowave-menu-content {
      opacity: 1;
      width: auto;
      overflow: visible;
    }
    
    .ontowave-menu-brand {
      font-weight: 600;
      color: #0969da;
      text-decoration: none;
      cursor: pointer;
      font-size: 0.9em;
    }
    
    .ontowave-menu-brand:hover {
      color: #0550ae;
    }
    
    .org-suffix {
      font-size: 0.7em;
      opacity: 0.7;
      font-weight: normal;
    }
    
    .ontowave-menu-options {
      display: flex;
      gap: 8px;
      flex-wrap: nowrap;
    }
    
    .ontowave-menu-option {
      padding: 6px 10px;
      background: #f8f9fa;
      border: 1px solid #d0d7de;
      border-radius: 15px;
      font-size: 0.75em;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
      pointer-events: auto;
    }
    
    .ontowave-menu-option:hover {
      background: #e2e8f0;
      transform: translateY(-1px);
    }
    
    .ontowave-menu-option.selected {
      background: #0969da;
      color: white;
      border-color: #0969da;
      box-shadow: 0 2px 8px rgba(9, 105, 218, 0.3);
    }
    
    .ontowave-menu-option.selected:hover {
      background: #0550ae;
      border-color: #0550ae;
      transform: translateY(-1px);
    }
    
    
    .ontowave-lang-btn {
      font-weight: bold;
      font-size: 11px;
    }
    
    .ontowave-lang-btn.active {
      background: #28a745;
      color: white;
      border-color: #28a745;
      box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
    }
    
    .ontowave-lang-btn.active:hover {
      background: #1e7e34;
      border-color: #1e7e34;
    }
    
    
    .ontowave-fixed-lang-buttons {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 999;
      display: flex;
      gap: 8px;
      background: rgba(255, 255, 255, 0.95);
      padding: 8px 12px;
      border-radius: 25px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    
    @media (max-width: 768px) {
      .ontowave-fixed-lang-buttons {
        top: 10px;
        right: 10px;
        padding: 6px 8px;
        gap: 4px;
      }
    }
    
    .ontowave-fixed-lang-btn {
      background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 4px;
      min-width: 40px;
      justify-content: center;
    }
    
    
    @media (max-width: 768px) {
      .ontowave-fixed-lang-btn {
        padding: 4px 8px;
        font-size: 11px;
        min-width: 35px;
        gap: 2px;
      }
    }
    
    .ontowave-fixed-lang-btn:hover {
      background: linear-gradient(135deg, #5a6268 0%, #343a40 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .ontowave-fixed-lang-btn.active {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4);
    }
    
    .ontowave-fixed-lang-btn.active:hover {
      background: linear-gradient(135deg, #1e7e34 0%, #198754 100%);
      transform: translateY(-2px);
    }
    
    
    .ontowave-header {
      display: none;
    }
    
    .ontowave-nav {
      background: #f8f9fa;
      border: 1px solid #e1e4e8;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .ontowave-nav h3 {
      margin: 0 0 1rem 0;
      color: #24292e;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .ontowave-nav-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
    }
    
    .ontowave-nav-item {
      padding: 1rem;
      background: white;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      text-decoration: none;
      color: #24292e;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.2s ease;
      font-weight: 500;
      cursor: pointer;
    }
    
    .ontowave-nav-item:hover {
      background: #f3f4f6;
      border-color: #0969da;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(27,31,35,0.15);
    }
    
    .ontowave-content {
      background: white;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(27,31,35,0.15);
      border: 1px solid #e1e4e8;
      margin-bottom: 2rem;
      min-height: 300px;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
    }
    
    
    .ontowave-content h1 {
      color: #24292e;
      border-bottom: 2px solid #e1e4e8;
      padding-bottom: 8px;
      margin-bottom: 16px;
      font-size: 2em;
      font-weight: 600;
    }
    
    .ontowave-content h2 {
      color: #24292e;
      margin-top: 24px;
      margin-bottom: 16px;
      font-size: 1.5em;
      font-weight: 600;
    }
    
    .ontowave-content h3 {
      color: #24292e;
      margin-top: 20px;
      margin-bottom: 12px;
      font-size: 1.25em;
      font-weight: 600;
    }
    
    .ontowave-content h4 {
      color: #24292e;
      margin-top: 16px;
      margin-bottom: 10px;
      font-size: 1.1em;
      font-weight: 600;
    }
    
    .ontowave-content h5 {
      color: #24292e;
      margin-top: 14px;
      margin-bottom: 8px;
      font-size: 1em;
      font-weight: 600;
    }
    
    .ontowave-content h6 {
      color: #24292e;
      margin-top: 12px;
      margin-bottom: 6px;
      font-size: 0.9em;
      font-weight: 600;
    }
    
    
    .ontowave-content hr {
      border: none;
      border-top: 1px solid #e1e4e8;
      margin: 24px 0;
    }
    
    
    .ontowave-mermaid {
      margin: 20px 0;
      padding: 20px;
      background: #f8f9fa;
      border: 1px solid #e1e4e8;
      border-radius: 8px;
      text-align: center;
    }
    
    .ontowave-loading {
      text-align: center;
      color: #666;
      padding: 2rem;
    }
    
    .ontowave-error {
      color: #d73a49;
      text-align: center;
      padding: 2rem;
      background: #ffeef0;
      border: 1px solid #fdaeb7;
      border-radius: 6px;
    }
    
    .ontowave-mermaid {
      background: #f6f8fa;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      padding: 1rem;
      margin: 1rem 0;
      text-align: center;
    }
    
    .ontowave-plantuml {
      background: #f6f8fa;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      padding: 1rem;
      margin: 1rem 0;
      text-align: center;
    }
    
    .ontowave-plantuml img {
      max-width: 100%;
      height: auto;
    }
    
    .ontowave-code {
      background: #f6f8fa;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      padding: 1rem;
      margin: 1rem 0;
      overflow-x: auto;
      font-family: ui-monospace, SFMono-Regular, monospace;
    }
    
    .ontowave-breadcrumb {
      padding: 0.5rem 0;
      margin-bottom: 1rem;
      border-bottom: 1px solid #e1e4e8;
    }
    
    .ontowave-breadcrumb a {
      color: #0969da;
      text-decoration: none;
      margin-right: 0.5rem;
    }
    
    .ontowave-breadcrumb a:hover {
      text-decoration: underline;
    }
    
    .ontowave-breadcrumb span {
      color: #656d76;
      margin-right: 0.5rem;
    }
    
    .ontowave-status {
      background: #d4edda;
      border: 1px solid #c3e6cb;
      border-radius: 8px;
      padding: 1rem;
      margin-top: 2rem;
    }
    
    .ontowave-status h4 {
      margin: 0 0 0.5rem 0;
      color: #155724;
    }
    
    .ontowave-status ul {
      margin: 0;
      padding-left: 1.5rem;
      color: #155724;
    }
    
    /* === FIX #1: STYLES TABLEAUX === */
    .ontowave-table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 14px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .ontowave-table th {
      background: #f6f8fa;
      padding: 12px 16px;
      font-weight: 600;
      border: 1px solid #d0d7de;
      color: #24292f;
    }
    
    .ontowave-table td {
      padding: 12px 16px;
      border: 1px solid #d0d7de;
      color: #24292f;
    }
    
    .ontowave-table tbody tr:nth-child(even) {
      background: #f6f8fa;
    }
    
    .ontowave-table tbody tr:hover {
      background: #eaeef2;
    }
    /* === FIN FIX #1 === */
    
    /* === FIX #4: STYLES CODE SOURCE PLANTUML + DIAGRAMME === */
    .ontowave-plantuml-container {
      margin: 20px 0;
    }
    
    .ontowave-plantuml-source {
      margin-bottom: 30px;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      overflow: hidden;
    }
    
    .ontowave-plantuml-source h3 {
      margin: 0;
      padding: 12px 16px;
      background: #f6f8fa;
      border-bottom: 1px solid #d0d7de;
      font-size: 16px;
      font-weight: 600;
      color: #24292f;
    }
    
    .ontowave-plantuml-source pre {
      margin: 0;
      background: #ffffff;
      padding: 16px;
      overflow-x: auto;
      max-height: 500px;
      overflow-y: auto;
    }
    
    .ontowave-plantuml-source code {
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 13px;
      line-height: 1.6;
    }
    
    .ontowave-plantuml-render {
      /* Bordure dÃ©sactivÃ©e Ã  la demande de l'utilisateur */
      /* border: 1px solid #d0d7de; */
      /* border-radius: 6px; */
      overflow: hidden;
      background: #ffffff;
    }
    
    .ontowave-plantuml-render h3 {
      margin: 0;
      padding: 12px 16px;
      background: #f6f8fa;
      border-bottom: 1px solid #d0d7de;
      font-size: 16px;
      font-weight: 600;
      color: #24292f;
    }
    
    .ontowave-plantuml-render img {
      padding: 20px;
      display: block;
      margin: 0 auto;
    }
    
    /* Styles pour les liens dans les SVG PlantUML */
    .plantuml-diagram a.ontowave-internal-link {
      transition: opacity 0.2s;
    }
    
    .plantuml-diagram a.ontowave-internal-link:hover {
      opacity: 0.7;
    }
    
    .plantuml-diagram svg {
      max-width: 100%;
      height: auto;
    }
    /* === FIN FIX #4 === */
    
    @media (max-width: 768px) {
      .ontowave-header {
        padding: 1rem;
      }
      
      .ontowave-header h1 {
        font-size: 2em;
      }
      
      .ontowave-nav-grid {
        grid-template-columns: 1fr;
      }
      
      .ontowave-content {
        padding: 1rem;
      }
    }
  `,document.head.appendChild(e)}async loadMermaid(){return new Promise(e=>{var t;d.mermaid?(this.mermaidLoaded=!0,this.initializeMermaid(),e()):((t=document.createElement("script")).src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js",t.onload=()=>{this.mermaidLoaded=!0,this.initializeMermaid(),e()},t.onerror=()=>{console.warn("âš ï¸ Failed to load Mermaid library"),e()},document.head.appendChild(t))})}initializeMermaid(){d.mermaid&&(d.mermaid.initialize(this.config.mermaid),console.log("ğŸ¨ Mermaid initialized"))}async loadPrism(){return new Promise(n=>{if(d.Prism)return this.prismLoaded=!0,console.log("ğŸ¨ Prism already loaded"),n();var e=document.createElement("link"),e=(e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css",document.head.appendChild(e),document.createElement("script"));e.src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js",e.onload=()=>{console.log("ğŸ¨ Prism core loaded"),d.Prism.languages.javascript||(d.Prism.languages.javascript={"class-name":null});let e=["markup","css","javascript"],t=0,o=()=>{t++,console.log(`ğŸ”¤ Essential language loaded: ${t}/`+e.length),t>=e.length&&(d.Prism.languages.markup&&(d.Prism.languages.html=d.Prism.languages.markup,console.log("ğŸ”¤ HTML alias created from markup")),this.prismLoaded=!0,console.log("âœ… Prism ready with essential languages"),n(),d.Prism&&d.Prism.languages&&(d.Prism.languages.plantuml={comment:/'[^\n]*/,keyword:/@startuml|@enduml|@startmindmap|@endmindmap|@startsalt|@endsalt|@startgantt|@endgantt|participant|actor|boundary|control|entity|database|collections|queue|as|title|note|over|left|right|end|alt|else|opt|loop|par|break|critical|group|autonumber|activate|deactivate|destroy|create|hide|show|class|interface|abstract|enum|extends|implements|package|namespace|skinparam|style|sprite/,string:{pattern:/"(?:\\.|[^\\"\r\n])*"/,greedy:!0},arrow:/(?:--|->|o-|-o|\*-|-\*|\.-|-\.)/,operator:/[:=[\](){}|]/,tag:/#[a-zA-Z0-9]+/,function:/\[\[.*?\]\]/,number:/\b\d+\b/,punctuation:/[,;]/},console.log("ğŸ­ PlantUML language definition added to Prism")),setTimeout(()=>{let o=["python","java","bash","json","yaml","mermaid"],n=0,a=()=>{if(n>=o.length)console.log("âœ… All safe Prism languages loaded"),e();else{let e=o[n++];var t=document.createElement("script");t.src=`https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-${e}.min.js`,t.onload=()=>{console.log("ğŸ”¤ Additional Prism language loaded: "+e),setTimeout(a,10)},t.onerror=()=>{console.warn("âš ï¸ Failed to load Prism language: "+e),a()},document.head.appendChild(t)}},e=()=>{var e;d.Prism.languages.javascript&&d.Prism.languages.javascript["class-name"]?((e=document.createElement("script")).src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-typescript.min.js",e.onload=()=>{console.log("ğŸ”¤ Additional Prism language loaded: typescript")},e.onerror=()=>{console.warn("âš ï¸ Failed to load Prism language: typescript")},document.head.appendChild(e)):console.warn("âš ï¸ JavaScript grammar incomplete, skipping TypeScript")};a()},100))};e.forEach(e=>{var t=document.createElement("script");t.src=`https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-${e}.min.js`,t.onload=o,t.onerror=()=>{console.warn("âš ï¸ Failed to load essential Prism language: "+e),o()},document.head.appendChild(t)})},e.onerror=()=>{console.warn("âš ï¸ Failed to load Prism library"),n()},document.head.appendChild(e)})}createInterface(t=null){this.container=document.getElementById(this.config.containerId),this.container||(this.container=document.createElement("div"),this.container.id=this.config.containerId,document.body.appendChild(this.container)),this.container.className="ontowave-container";var e=this.config.showGallery?`<span class="ontowave-menu-option" onclick="window.location.href='gallery.html'">ğŸ¨ ${this.t("menuGallery",t)}</span>`:"",o=this.config.ui?.languageButtons||"menu",o=this.config.locales&&1<this.config.locales.length&&("menu"===o||"both"===o)?this.config.locales.map(e=>`<span class="ontowave-menu-option ontowave-lang-btn${(t||this.getCurrentLanguage())===e?" active":""}" onclick="event.stopPropagation(); window.OntoWave.instance.switchLanguage('${e}');">ğŸŒ ${e.toUpperCase()}</span>`).join(""):"";this.container.innerHTML=`
        <div class="ontowave-floating-menu" id="ontowave-floating-menu" title="OntoWave Menu">
          <span class="ontowave-menu-icon" id="ontowave-menu-icon">&#127754;</span>
          <div class="ontowave-menu-content" id="ontowave-menu-content">
            <a href="https://ontowave.org/" target="_blank" class="ontowave-menu-brand">OntoWave<span class="org-suffix">.org</span></a>
            <div class="ontowave-menu-options">
              <span class="ontowave-menu-option" onclick="window.OntoWave.instance.goHome()">ğŸ  ${this.t("menuHome",t)}</span>
              ${e}
              ${o}
              <span class="ontowave-menu-option" onclick="event.stopPropagation(); window.OntoWave.instance.toggleConfigurationPanel(event, '${t||this.getCurrentLanguage()}');">âš™ï¸ ${this.t("menuConfiguration",t)}</span>
            </div>
          </div>
        </div>
        
        <div class="ontowave-content" id="ontowave-content">
          <div class="ontowave-loading">â³ Chargement du contenu...</div>
        </div>
        
        <div class="ontowave-status" style="display: none;">
          <h4>âœ… OntoWave Package Actif</h4>
          <ul>
            <li><strong>Chargement rapide:</strong> SystÃ¨me intÃ©grÃ©</li>
            <li><strong>Mermaid:</strong> ${this.mermaidLoaded?"ChargÃ©":"Non disponible"}</li>
            <li><strong>Prism:</strong> ${this.prismLoaded?"ChargÃ©":"Non disponible"}</li>
            <li><strong>PlantUML:</strong> Support intÃ©grÃ©</li>
            <li><strong>Navigation:</strong> Hash prÃ©servÃ©</li>
          </ul>
        </div>
      `,this.createFixedLanguageButtons(t)}createFixedLanguageButtons(e=null){var t=document.getElementById("ontowave-fixed-lang-buttons"),t=(t&&t.remove(),this.config.ui?.languageButtons||"menu");if(this.config.locales&&1<this.config.locales.length&&("fixed"===t||"both"===t)){let n=e||this.getCurrentLanguage();var e=document.createElement("div"),o=(e.id="ontowave-fixed-lang-buttons",e.className="ontowave-fixed-lang-buttons",this.config.locales.map(e=>{var t=n===e?" active":"",o=this.getLanguageFlag(e);return`<button class="ontowave-fixed-lang-btn${t}" onclick="window.OntoWave.instance.switchLanguage('${e}')" title="Changer en ${e.toUpperCase()}">${o} ${e.toUpperCase()}</button>`}).join(""));e.innerHTML=o,document.body.appendChild(e),console.log("ğŸŒ Boutons de langue fixÃ©s crÃ©Ã©s:",this.config.locales,"Mode:",t)}}getLanguageFlag(e){return{fr:"ğŸ‡«ğŸ‡·",en:"ğŸ‡¬ğŸ‡§",es:"ğŸ‡ªğŸ‡¸",de:"ğŸ‡©ğŸ‡ª",it:"ğŸ‡®ğŸ‡¹",pt:"ğŸ‡µğŸ‡¹",zh:"ğŸ‡¨ğŸ‡³",ja:"ğŸ‡¯ğŸ‡µ",ko:"ğŸ‡°ğŸ‡·",ru:"ğŸ‡·ğŸ‡º"}[e]||"ğŸŒ"}initializeNavigation(){d.addEventListener("hashchange",()=>{var e=location.hash.replace("#","")||this.config.defaultPage;this.loadPage(e)}),this.createDefaultNavigation(),this.initializeFloatingMenu()}initializeFloatingMenu(){let l=document.getElementById("ontowave-floating-menu");var e=document.getElementById("ontowave-menu-icon");if(l&&e){let o=!1,a=!1,i={x:0,y:0};function t(){!o&&!document.querySelector(".ontowave-config-panel")?l.classList.remove("no-drag"):(l.classList.add("no-drag"),a=!1,document.body.style.userSelect="",document.body.style.cursor="")}function n(){a=!1,l.style.cursor="move",document.body.style.userSelect="",document.body.style.cursor=""}d.ontowaveUpdateDragState=t,e.addEventListener("click",e=>{e.stopPropagation(),(o=!o)?l.classList.add("expanded"):l.classList.remove("expanded"),t()}),document.addEventListener("click",e=>{!l.contains(e.target)&&o&&(o=!1,l.classList.remove("expanded"),t())}),l.addEventListener("mousedown",e=>{var t;o||document.querySelector(".ontowave-config-panel")||e.target.closest("a, .ontowave-menu-option")||(a=!0,t=l.getBoundingClientRect(),i.x=e.clientX-t.left,i.y=e.clientY-t.top,l.style.cursor="grabbing",document.body.style.userSelect="none",e.preventDefault(),e.stopPropagation())}),document.addEventListener("mousemove",e=>{var t,o,n;a&&(t=e.clientX-i.x,e=e.clientY-i.y,o=d.innerWidth-l.offsetWidth,n=d.innerHeight-l.offsetHeight,l.style.left=Math.max(0,Math.min(o,t))+"px",l.style.top=Math.max(0,Math.min(n,e))+"px")}),document.addEventListener("mouseup",()=>{a&&(a=!1,l.style.cursor="move",document.body.style.userSelect="")}),document.addEventListener("visibilitychange",n),d.addEventListener("blur",n),d.addEventListener("focus",n),d.resetOntoWaveDragState=n,l.addEventListener("touchstart",e=>{var t;e.target.closest("a, .ontowave-menu-option")||(e=e.touches[0],t=l.getBoundingClientRect(),i.x=e.clientX-t.left,i.y=e.clientY-t.top,a=!0)}),document.addEventListener("touchmove",e=>{var t,o,n;a&&(e.preventDefault(),t=(e=e.touches[0]).clientX-i.x,e=e.clientY-i.y,o=d.innerWidth-l.offsetWidth,n=d.innerHeight-l.offsetHeight,l.style.left=Math.max(0,Math.min(o,t))+"px",l.style.top=Math.max(0,Math.min(n,e))+"px")}),document.addEventListener("touchend",()=>{a=!1}),t(),this.enhanceMenuOptionClicks()}}enhanceMenuOptionClicks(){var e=document.querySelector('.ontowave-menu-option[onclick*="toggleConfigurationPanel"]');e&&e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("Configuration button clicked via event listener"),this.toggleConfigurationPanel(e)},{capture:!0})}createDefaultNavigation(){var e=document.getElementById("ontowave-nav-grid");e&&(e.innerHTML=[{href:"index.md",icon:"ğŸ ",label:"Accueil"},{href:"en/index.md",icon:"ğŸ‡¬ğŸ‡§",label:"English"},{href:"fr/index.md",icon:"ğŸ‡«ğŸ‡·",label:"FranÃ§ais"},{href:"demo/mermaid.md",icon:"ğŸ§œâ€â™€ï¸",label:"DÃ©mo Mermaid"},{href:"demo/plantuml.md",icon:"ğŸ­",label:"PlantUML"},{href:"demo/advanced-shapes.md",icon:"ğŸ¯",label:"Formes AvancÃ©es"}].map(e=>`
        <a href="#${e.href}" class="ontowave-nav-item" onclick="window.OntoWave.loadPage('${e.href}')">
          ${e.icon} ${e.label}
        </a>
      `).join(""))}async loadInitialPage(){var e=location.hash.replace("#","");if(!e&&this.config.languages&&this.config.languages.supported){var t=navigator.language.split("-")[0].toLowerCase(),o=(console.log("ğŸŒ Browser language detected:",t),this.config.languages.supported.split(",").map(e=>e.trim().toLowerCase())),n=this.config.languages.fallback||"fr";if(o.includes(t)&&t!==n){console.log("ğŸŒ Auto-redirecting to browser language: "+t);o=this.config.defaultPage.replace(/\.([a-z]{2})\.md$/,".md").replace(/\.md$/,"")+`.${t}.md`;try{if((await fetch(this.config.baseUrl+o,{method:"HEAD"})).ok)return console.log("ğŸŒ Language page found: "+o),location.hash="#"+o,void await this.loadPage(o)}catch(e){console.log(`ğŸŒ Language page not found: ${o}, using fallback`)}}}if(this.isMultilingualMode()&&!e){n=this.config.sources[this.config.defaultLocale];if(console.log("ğŸŒ Multilingual mode detected"),console.log("ğŸŒ Default locale:",this.config.defaultLocale),console.log("ğŸŒ Default source:",n),console.log("ğŸŒ Sources config:",this.config.sources),n)return console.log("ğŸŒ Multilingual mode: redirecting to",n),void(location.hash="#"+n)}var a,t=e||this.config.defaultPage;if("index.md"===t){let e=!1;for(a of this.generatePageCandidates(t))try{if((await fetch(this.config.baseUrl+a,{method:"HEAD"})).ok){await this.loadPage(a),e=!0;break}}catch(e){continue}e||(console.log("ğŸ“„ No index file found, showing configuration"),this.showConfigurationInterface())}else await this.loadPage(t)}async loadPage(t){var o=document.getElementById("ontowave-content");if(o){console.log("ğŸ“„ Loading page:",t),this.currentPage=t,d.resetOntoWaveDragState&&d.resetOntoWaveDragState(),location.hash!=="#"+t&&(location.hash="#"+t),this.updateBreadcrumb(t),o.innerHTML='<div class="ontowave-loading">â³ Chargement de '+t+"...</div>";try{var n=await fetch(this.config.baseUrl+t);if(!n.ok)throw new Error(`HTTP ${n.status}: `+n.statusText);var a,i,l=await n.text();console.log("âœ… Content loaded:",l.length,"characters");let e;e=t.endsWith(".puml")?(console.log("ğŸ­ Processing .puml file"),a=(e=>{var t=(new TextEncoder).encode(e);let o="";for(let e=0;e<t.length;e++)o+=t[e].toString(16).padStart(2,"0");return"h"+o})(l),i=`${this.config.plantuml.server}/${this.config.plantuml.format}/~`+a,`
            <div class="ontowave-plantuml-container">
              <div class="ontowave-plantuml-source">
                <h3>ğŸ“ Code Source PlantUML</h3>
                <pre><code class="language-plantuml">${l.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>
              </div>
              <div class="ontowave-plantuml-render">
                <h3>ğŸ¨ Diagramme Rendu</h3>
                <div class="plantuml-diagram" data-plantuml-url="${i}">â³ Chargement diagramme PlantUML...</div>
              </div>
            </div>
          `):await this.renderMarkdown(l),o.innerHTML=e,document.querySelectorAll(".ontowave-loading").forEach(e=>e.remove()),await this.processDiagrams(o),await this.processPlantUML(o),await this.processPrism(o)}catch(e){console.error("âŒ Failed to load page:",e),this.showError(`Impossible de charger ${t}: `+e.message)}}}updateBreadcrumb(e){var t=document.getElementById("ontowave-breadcrumb");if(t&&this.config.navigation.showBreadcrumb){let o=e.split("/"),n=['<a href="#'+this.config.defaultPage+'">ğŸ  Accueil</a>'],a="";o.forEach((e,t)=>{t===o.length-1?n.push("<span>"+e.replace(".md","")+"</span>"):(a+=(a?"/":"")+e,n.push('<a href="#'+a+'/index.md">'+e+"</a>"))}),t.innerHTML=n.join(" <span>â€º</span> "),t.style.display="block"}}async renderMarkdown(e){let o=e,l=(o=o.replace(/\n(\|[^\n]+\|\n)+/gm,e=>{var t=e.trim().split("\n");if(t.length<2)return e;var e=t[0].split("|").map(e=>e.trim()).filter(e=>e),o=t[1].split("|").map(e=>e.trim()).filter(e=>e),t=t.slice(2).map(e=>e.split("|").map(e=>e.trim()).filter(e=>""!==e));let n=o.map(e=>e.startsWith(":")&&e.endsWith(":")?"center":e.endsWith(":")?"right":"left"),a='<table class="ontowave-table">';return a+="<thead><tr>",e.forEach((e,t)=>{t=n[t]||"left";a+=`<th style="text-align: ${t}">${e}</th>`}),a=a+"</tr></thead>"+"<tbody>",t.forEach(e=>{a+="<tr>",e.forEach((e,t)=>{t=n[t]||"left";a+=`<td style="text-align: ${t}">${e}</td>`}),a+="</tr>"}),"\n"+(a+="</tbody></table>")+"\n"}),[]);return o=(o=o.replace(/```(\w+)([\s\S]*?)```/g,(e,t,o)=>{var n,a,o=o.trim(),i=`__CODE_BLOCK_${l.length}__`;return"mermaid"===t?(n="mermaid-"+Math.random().toString(36).substr(2,9),l.push(`<div class="mermaid" id="${n}">${o}</div>`)):"plantuml"===t?(n="plantuml-"+Math.random().toString(36).substr(2,9),a=(e=>{var t=(new TextEncoder).encode(e);let o="";for(let e=0;e<t.length;e++)o+=t[e].toString(16).padStart(2,"0");return"h"+o})(o),a=`${this.config.plantuml.server}/${this.config.plantuml.format}/~`+a,l.push(`<div class="plantuml-diagram" id="${n}" data-plantuml-url="${a}">â³ Chargement diagramme PlantUML...</div>`)):(n=this.prismLoaded?"language-"+t:"",console.log(`ğŸ“ Processing code block: language="${t}", prismLoaded=${this.prismLoaded}, class="${n}"`),a=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),l.push(`<pre class="ontowave-code"><code class="${n}">${a}</code></pre>`)),i})).replace(/^###### (.+)$/gm,"<h6>$1</h6>").replace(/^##### (.+)$/gm,"<h5>$1</h5>").replace(/^#### (.+)$/gm,"<h4>$1</h4>").replace(/^### (.+)$/gm,"<h3>$1</h3>").replace(/^## (.+)$/gm,"<h2>$1</h2>").replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/^---+$/gm,"<hr>").replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1">').replace(/\[([^\]]+)\]\(([^)]+\.html[^)]*)\)/g,'<a href="$2">$1</a>').replace(/\[([^\]]+)\]\((https?:\/\/[^)]+)\)/g,'<a href="$2" target="_blank">$1</a>').replace(/\[([^\]]+)\]\(([^)]+\.(tar\.gz|zip|pdf|doc|docx|xls|xlsx|ppt|pptx|txt|csv|json|xml|js|css|png|jpg|jpeg|gif|svg|webp)[^)]*)\)/g,'<a href="$2" download>$1</a>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="#$2" onclick="window.OntoWave.loadPage(\'$2\')">$1</a>').replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`([^`]+)`/g,"<code>$1</code>"),o=(o=this.renderAdvancedTables(o)).split("\n\n").map(e=>e.trim()).filter(e=>0<e.length).map(e=>e.match(/^<(h[1-6]|hr|div|pre)/)?e:`<p>${e.replace(/\n/g,"<br>")}</p>`).join("\n"),l.forEach((e,t)=>{o=o.replace(`__CODE_BLOCK_${t}__`,e)}),o}renderAdvancedTables(e){let l=!1;return e=e.replace(/(\|[^|\n]*\|[^|\n]*\|[^\n]*\n\|[-:| ]+\|[^\n]*\n(?:\|[^\n]*\n?)*)/g,e=>{var t=e.trim().split("\n");if(t.length<2)return e;var o=t[0],n=t[1],t=t.slice(2);if(!o.includes("|")||!n.includes("|"))return e;l=!0;e=o.split("|").map(e=>e.trim()).filter(e=>e);let a=n.split("|").map(e=>e.trim()).filter(e=>e).map(e=>e.startsWith(":")&&e.endsWith(":")?"center":e.endsWith(":")?"right":(e.startsWith(":"),"left"));o=t.map(e=>e.split("|").map(e=>e.trim()).filter(e=>e)).filter(e=>0<e.length);let i="<table>";return i+="<thead><tr>",e.forEach((e,t)=>{t=a[t]||"left";i+=`<th class="text-${t}">${e}</th>`}),i=i+"</tr></thead>"+"<tbody>",o.forEach(e=>{i+="<tr>",e.forEach((e,t)=>{t=a[t]||"left";i+=`<td class="text-${t}">${e}</td>`}),i+="</tr>"}),i+="</tbody></table>"}),l&&this.injectTableStyles(),e}injectTableStyles(){var e;document.getElementById("ontowave-table-styles")||((e=document.createElement("style")).id="ontowave-table-styles",e.textContent=`
table {
    border-collapse: collapse;
    width: 100%;
    margin: 16px 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    font-size: 14px;
    line-height: 1.5;
    background-color: white;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    border-radius: 6px;
    overflow: hidden;
}

thead th, th {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    font-weight: 600;
    color: #495057;
    border: 1px solid #dee2e6;
    padding: 12px 16px;
    text-transform: uppercase;
    font-size: 12px;
    letter-spacing: 0.5px;
}

tbody td, td {
    border: 1px solid #dee2e6;
    padding: 12px 16px;
    background-color: white;
    transition: background-color 0.2s ease;
}

tbody tr:nth-child(even), tr:nth-child(even) {
    background-color: #f8f9fa;
}

tbody tr:hover, tr:hover {
    background-color: #e3f2fd;
}

.text-left { text-align: left !important; }
.text-center { text-align: center !important; }
.text-right { text-align: right !important; }
.text-justify { text-align: justify !important; hyphens: auto; }

td:empty::before {
    content: "â€”";
    color: #6c757d;
    font-style: italic;
}

@media (max-width: 768px) {
    table {
        font-size: 12px;
        display: block;
        overflow-x: auto;
        white-space: nowrap;
    }
    th, td {
        padding: 8px 12px;
        min-width: 100px;
    }
}`,document.head.appendChild(e),console.log("âœ… Styles CSS tableaux injectÃ©s dans le DOM"))}async processDiagrams(t){if(this.mermaidLoaded&&d.mermaid){let o=t.querySelectorAll(".mermaid");if(0!==o.length){console.log("ğŸ¨ Processing",o.length,"Mermaid diagrams");try{o.forEach(e=>{e.removeAttribute("data-processed")}),await d.mermaid.run(),console.log("âœ… Mermaid diagrams rendered successfully"),setTimeout(()=>{var e=t.querySelectorAll(".mermaid svg");console.log("ğŸ¨ SVG elements found:",e.length),0===e.length&&0<o.length&&(console.log("âš ï¸ Retrying Mermaid rendering..."),o.forEach(e=>{e.removeAttribute("data-processed")}),d.mermaid.init(void 0,o))},1e3)}catch(t){console.error("âŒ Mermaid rendering error:",t),o.forEach(e=>{e.querySelector("svg")||(e.innerHTML=`<div style="color: #d73a49; padding: 10px;">âŒ Erreur de rendu Mermaid: ${t.message}</div><pre style="background: #f8f8f8; padding: 10px; margin-top: 10px; border-radius: 4px;"><code>${e.textContent}</code></pre>`)})}}}}async processPlantUML(e){var e=e.querySelectorAll(".plantuml-diagram[data-plantuml-url]");0!==e.length&&(console.log("ğŸŒ± Processing",e.length,"PlantUML diagrams"),e=Array.from(e).map(async t=>{var o=t.getAttribute("data-plantuml-url");try{let e;var n=this.getCachedSVG(o);if(n)e=n;else{var a=await fetch(o);if(!a.ok)throw new Error(`HTTP ${a.status}: `+a.statusText);e=await a.text(),this.cacheSVG(o,e)}var i=document.createElement("div"),l=(i.innerHTML=e,i.querySelector("svg"));if(!l)throw new Error("No SVG found in response");l.style.maxWidth="100%",l.style.height="auto",l.style.display="block",l.style.margin="0 auto";var r=l.querySelectorAll("a[href]");console.log(`ğŸ”— Found ${r.length} links in PlantUML diagram`),r.forEach(e=>{let t=e.getAttribute("href");t&&(t.endsWith(".md")||t.endsWith(".html")||t.endsWith(".puml"))&&(e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),console.log("ğŸ”— Navigating to: "+t),this.loadPage(t)}),e.style.cursor="pointer",e.setAttribute("class",(e.getAttribute("class")||"")+" ontowave-internal-link"))}),t.innerHTML="",t.appendChild(l),console.log("âœ… PlantUML diagram rendered with",r.length,"clickable links")}catch(e){console.error("âŒ Failed to load PlantUML diagram:",e),t.innerHTML=`
            <div style="color: #d73a49; padding: 20px; background: #fff5f5; border: 1px solid #feb2b2; border-radius: 6px;">
              <strong>âŒ Erreur de rendu PlantUML</strong>
              <p style="margin: 5px 0; font-size: 14px;">${e.message}</p>
              <details style="margin-top: 10px;">
                <summary style="cursor: pointer; color: #0366d6;">DÃ©tails techniques</summary>
                <pre style="background: #f6f8fa; padding: 10px; margin-top: 5px; border-radius: 4px; overflow-x: auto; font-size: 12px;">URL: ${o}</pre>
              </details>
            </div>
          `}}),await Promise.all(e),console.log("âœ… All PlantUML diagrams processed"))}async processPrism(e){if(console.log("ğŸ” processPrism called - prismLoaded:",this.prismLoaded,"window.Prism:",!!d.Prism),d.Prism){if(!d.Prism.languages||!d.Prism.languages.javascript){console.log("â³ JavaScript not loaded yet, waiting...");for(let e=0;e<20;e++)if(await new Promise(e=>setTimeout(e,100)),d.Prism.languages&&d.Prism.languages.javascript){console.log("âœ… JavaScript language now available");break}d.Prism.languages&&d.Prism.languages.javascript||console.warn("âš ï¸ JavaScript language still not available after waiting")}try{console.log("ğŸ”¤ Available Prism languages:",d.Prism.languages?Object.keys(d.Prism.languages):"none");var t=e.querySelectorAll('code[class*="language-"]'),o=(console.log("ğŸ¨ Found",t.length,"code blocks with language classes"),t.forEach((e,t)=>{console.log(`ğŸ” Code block ${t}:`),console.log(`  - class: "${e.className}"`),console.log("  - content length: "+e.textContent?.length),console.log(`  - content preview: "${e.textContent?.substring(0,50)}..."`),console.log("  - parent visible: "+("none"!==d.getComputedStyle(e.parentElement).display)),console.log("  - element visible: "+("none"!==d.getComputedStyle(e).display))}),e.querySelectorAll("code"));if(console.log("ğŸ“ Total code blocks found:",o.length),0<t.length){var n=t[0];console.log("ğŸ§ª Testing manual highlighting on first element...");var a=n.className.split(" ").find(e=>e.startsWith("language-")),i=a?a.replace("language-",""):"unknown";if(console.log(`ğŸ”¤ Language detected: "${i}"`),console.log("ğŸ”¤ Language available in Prism: "+!(!d.Prism.languages||!d.Prism.languages[i])),d.Prism.languages&&d.Prism.languages[i]){console.log("ğŸ§ª Attempting manual highlight...");var l=n.textContent;try{var r=d.Prism.highlight(l,d.Prism.languages[i],i);console.log("ğŸ¨ Manual highlight result length: "+r.length),console.log(`ğŸ¨ Manual highlight preview: "${r.substring(0,100)}..."`),n.innerHTML=r,console.log("âœ… Manual highlight applied")}catch(e){console.error("âŒ Manual highlight failed:",e)}}d.Prism.highlightAllUnder(e),console.log("âœ… Prism syntax highlighting applied to",t.length,"blocks");var s=e.querySelectorAll(".token");console.log("ğŸ¨ Tokens created after highlighting:",s.length),0<s.length&&s.forEach((e,t)=>{console.log(`Token ${t}: "${e.textContent}" (class: ${e.className})`)})}else console.log("âš ï¸ No code blocks with language classes found for Prism")}catch(e){console.error("âŒ Prism highlighting error:",e)}}else console.log("ğŸ¨ Prism not available, skipping syntax highlighting")}showConfigurationInterface(){var e,t=document.getElementById("ontowave-content");t&&(e=JSON.stringify(this.config,null,2).replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t.innerHTML=`
        <div class="ontowave-config-interface">
          <div class="config-header">
            <h1>ğŸŒŠ OntoWave Configuration</h1>
            <p>Aucun fichier index trouvÃ©. Configurez OntoWave pour votre projet :</p>
          </div>
          
          <div class="config-content">
            <div class="config-form">
              <h2>ğŸ“ Configuration</h2>
              
              <div class="form-group">
                <label for="config-title">Titre du site :</label>
                <input type="text" id="config-title" />
              </div>
              
              <div class="form-group">
                <label for="config-defaultPage">Page par dÃ©faut :</label>
                <input type="text" id="config-defaultPage" />
              </div>
              
              <div class="form-group">
                <label for="config-locales">Langues supportÃ©es (sÃ©parÃ©es par des virgules) :</label>
                <input type="text" id="config-locales" placeholder="fr-CA, fr, en" />
              </div>
              
              <div class="form-group">
                <label>
                  <input type="checkbox" id="config-showGallery" />
                  Afficher la galerie d'exemples
                </label>
              </div>
              
              <div class="form-group">
                <label for="config-mermaidTheme">ThÃ¨me Mermaid :</label>
                <select id="config-mermaidTheme">
                  <option value="default">Default</option>
                  <option value="dark">Dark</option>
                  <option value="forest">Forest</option>
                  <option value="neutral">Neutral</option>
                </select>
              </div>
              
              <div class="form-actions">
                <button onclick="window.OntoWave.instance.updateConfigFromForm()">âœ… Appliquer</button>
                <button onclick="window.OntoWave.instance.downloadConfig()">ğŸ’¾ TÃ©lÃ©charger HTML</button>
                <button onclick="window.OntoWave.instance.resetConfig()">ğŸ”„ Reset</button>
              </div>
            </div>
            
            <div class="config-code">
              <h2>ğŸ’» Code HTML gÃ©nÃ©rÃ©</h2>
              <div class="code-preview">
                <pre><code id="generated-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;${this.config.title}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script src="ontowave.min.js"&gt;&lt;/script&gt;
    &lt;script type="application/json" id="ontowave-config"&gt;
${e}
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
              </div>
              
              <div class="usage-info">
                <h3>ğŸ“‹ Instructions d'utilisation</h3>
                <ol>
                  <li>Configurez les options dans le formulaire</li>
                  <li>Cliquez sur "TÃ©lÃ©charger HTML" pour obtenir votre fichier</li>
                  <li>Placez vos fichiers .md dans le mÃªme dossier</li>
                  <li>Ouvrez le fichier HTML dans votre navigateur</li>
                </ol>
                
                <h3>ğŸŒ Gestion des langues</h3>
                <ul>
                  <li><strong>Monolingue :</strong> Laissez "Langues supportÃ©es" vide</li>
                  <li><strong>Multilingue :</strong> Ajoutez les codes de langue (ex: fr, en, fr-CA)</li>
                  <li><strong>Fichiers :</strong> index.fr.md, index.en.md, etc.</li>
                  <li><strong>Fallback :</strong> index.md si aucune langue trouvÃ©e</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      `,this.addConfigStyles(),this.populateConfigForm(),this.updateGeneratedCode())}populateConfigForm(){var e=document.getElementById("config-title"),t=document.getElementById("config-defaultPage"),o=document.getElementById("config-locales"),n=document.getElementById("config-showGallery"),a=document.getElementById("config-mermaidTheme");e&&(e.value=this.config.title),t&&(t.value=this.config.defaultPage),o&&(o.value=this.config.locales.join(", ")),n&&(n.checked=this.config.showGallery),a&&(a.value=this.config.mermaid.theme)}addConfigStyles(){var e;document.getElementById("ontowave-config-styles")||((e=document.createElement("style")).id="ontowave-config-styles",e.textContent=`
        .ontowave-config-interface {
          max-width: 1200px;
          margin: 0 auto;
          padding: 20px;
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .config-header {
          text-align: center;
          margin-bottom: 40px;
        }
        
        .config-header h1 {
          color: #0969da;
          margin-bottom: 10px;
        }
        
        .config-content {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 40px;
          align-items: start;
        }
        
        .config-form {
          background: #f8f9fa;
          padding: 30px;
          border-radius: 12px;
          border: 1px solid #e1e4e8;
        }
        
        .config-code {
          background: #ffffff;
          padding: 30px;
          border-radius: 12px;
          border: 1px solid #e1e4e8;
        }
        
        .form-group {
          margin-bottom: 20px;
        }
        
        .form-group label {
          display: block;
          font-weight: 600;
          margin-bottom: 8px;
          color: #24292e;
        }
        
        .form-group input, .form-group select {
          width: 100%;
          padding: 10px;
          border: 1px solid #d0d7de;
          border-radius: 6px;
          font-size: 14px;
        }
        
        .form-group input[type="checkbox"] {
          width: auto;
          margin-right: 8px;
        }
        
        .form-actions {
          display: flex;
          gap: 10px;
          margin-top: 30px;
        }
        
        .form-actions button {
          flex: 1;
          padding: 12px 20px;
          border: none;
          border-radius: 6px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
        }
        
        .form-actions button:first-child {
          background: #28a745;
          color: white;
        }
        
        .form-actions button:nth-child(2) {
          background: #0969da;
          color: white;
        }
        
        .form-actions button:last-child {
          background: #6c757d;
          color: white;
        }
        
        .form-actions button:hover {
          transform: translateY(-1px);
          box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .code-preview {
          background: #f6f8fa;
          border: 1px solid #e1e4e8;
          border-radius: 6px;
          padding: 16px;
          overflow-x: auto;
          margin-bottom: 20px;
        }
        
        .code-preview pre {
          margin: 0;
          font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
          font-size: 13px;
          line-height: 1.4;
        }
        
        .usage-info h3 {
          color: #0969da;
          margin-top: 25px;
          margin-bottom: 10px;
        }
        
        .usage-info ul, .usage-info ol {
          padding-left: 20px;
        }
        
        .usage-info li {
          margin-bottom: 5px;
        }
        
        @media (max-width: 768px) {
          .config-content {
            grid-template-columns: 1fr;
            gap: 20px;
          }
        }
      `,document.head.appendChild(e))}updateConfigFromForm(){var e=document.getElementById("config-title").value,t=document.getElementById("config-defaultPage").value,o=document.getElementById("config-locales").value.split(",").map(e=>e.trim()).filter(e=>0<e.length),n=document.getElementById("config-showGallery").checked,a=document.getElementById("config-mermaidTheme").value;this.config.title=e,this.config.defaultPage=t,this.config.locales=o,this.config.showGallery=n,this.config.mermaid.theme=a,console.log("ğŸ“ Configuration updated:",this.config),document.title=this.config.title,this.updateGeneratedCode(),this.showNotification("âœ… Configuration mise Ã  jour")}updateGeneratedCode(){var e={title:this.config.title,baseUrl:this.config.baseUrl,defaultPage:this.config.defaultPage,locales:this.config.locales,fallbackLocale:this.config.fallbackLocale,showGallery:this.config.showGallery,mermaid:{theme:this.config.mermaid.theme}},e=JSON.stringify(e,null,2).replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=`&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;${this.config.title}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script src="ontowave.min.js"&gt;&lt;/script&gt;
    &lt;script type="application/json" id="ontowave-config"&gt;
${e}
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;`,t=document.getElementById("generated-html");t&&(t.innerHTML=e)}downloadConfig(){var e={title:this.config.title,baseUrl:this.config.baseUrl,defaultPage:this.config.defaultPage,locales:this.config.locales,fallbackLocale:this.config.fallbackLocale,showGallery:this.config.showGallery,mermaid:{theme:this.config.mermaid.theme}},e=JSON.stringify(e,null,2),e=`<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>${this.config.title}</title>
</head>
<body>
    <script src="ontowave.min.js"></script>
    <script type="application/json" id="ontowave-config">
${e}
    </script>
</body>
</html>`,e=new Blob([e],{type:"text/html"}),e=URL.createObjectURL(e),t=document.createElement("a");t.href=e,t.download="index.html",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e),this.showNotification("ğŸ’¾ Fichier HTML tÃ©lÃ©chargÃ©")}resetConfig(){this.config={...t},this.showConfigurationInterface(),this.showNotification("ğŸ”„ Configuration rÃ©initialisÃ©e")}showNotification(e){let t=document.createElement("div");t.style.cssText=`
        position: fixed;
        top: 20px;
        right: 20px;
        background: #28a745;
        color: white;
        padding: 12px 20px;
        border-radius: 6px;
        z-index: 10000;
        font-weight: 600;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        animation: slideIn 0.3s ease;
      `,t.textContent=e,document.getElementById("notification-styles")||((e=document.createElement("style")).id="notification-styles",e.textContent=`
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
        `,document.head.appendChild(e)),document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideIn 0.3s ease reverse",setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)},3e3)}showError(e){var t=document.getElementById("ontowave-content");t&&(t.innerHTML=`<div class="ontowave-error">âŒ ${e}</div>`)}toggleConfigurationPanel(o,n=null){o&&(o.preventDefault(),o.stopPropagation());o=n||this.getCurrentLanguage(),console.log("âš™ï¸ Opening config panel with locale:",o),n=document.querySelector(".ontowave-menu-content");if(n){var a=document.querySelector('.ontowave-menu-option[onclick*="toggleConfigurationPanel"]');let t=document.getElementById("ontowave-config-panel");if(t){t.remove(),a&&a.classList.remove("selected");let e=document.getElementById("ontowave-floating-menu");e&&e.classList.remove("has-config-panel"),"function"==typeof d.ontowaveUpdateDragState&&d.ontowaveUpdateDragState(),void console.log("Config panel closed")}else{a&&a.classList.add("selected"),(t=document.createElement("div")).id="ontowave-config-panel",t.className="ontowave-config-panel",t.innerHTML=`
        <div class="config-panel-content">
          <div class="config-full-panel">
            <h3>ğŸŒŠ ${this.t("configTitle",o)}</h3>
            
            <!-- Section GÃ©nÃ©ral -->
            <div class="config-section">
              <h4>ğŸ“– ${this.t("configGeneral",o)}</h4>
              <div class="config-row">
                <div class="form-group-full">
                  <label for="config-title-full">${this.t("configSiteTitle",o)}</label>
                  <input type="text" id="config-title-full" value="${this.config.title}" />
                </div>
                <div class="form-group-full">
                  <label for="config-defaultPage-full">${this.t("configDefaultPage",o)}</label>
                  <input type="text" id="config-defaultPage-full" value="${this.config.defaultPage}" placeholder="index.md" />
                </div>
              </div>
              <div class="form-group-full">
                <label for="config-baseUrl-full">${this.t("configBaseUrl",o)}</label>
                <input type="text" id="config-baseUrl-full" value="${this.config.baseUrl}" placeholder="/" />
              </div>
            </div>

            <!-- Section Langues et Localisation -->
            <div class="config-section">
              <h4>ğŸŒ ${this.t("configLanguages",o)}</h4>
              <div class="config-row">
                <div class="form-group-full">
                  <label for="config-locales-full">${this.t("configSupportedLanguages",o)}</label>
                  <input type="text" id="config-locales-full" value="${this.config.locales.join(", ")}" placeholder="fr-CA, fr, en" />
                  <small>${this.t("configLanguageNote",o)}</small>
                </div>
                <div class="form-group-full">
                  <label for="config-fallbackLocale-full">${this.t("configFallbackLanguage",o)}</label>
                  <select id="config-fallbackLocale-full">
                    <option value="en" ${"en"===this.config.fallbackLocale?"selected":""}>English (en)</option>
                    <option value="fr" ${"fr"===this.config.fallbackLocale?"selected":""}>FranÃ§ais (fr)</option>
                    <option value="es" ${"es"===this.config.fallbackLocale?"selected":""}>EspaÃ±ol (es)</option>
                    <option value="de" ${"de"===this.config.fallbackLocale?"selected":""}>Deutsch (de)</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Section Navigation et Interface -->
            <div class="config-section">
              <h4>ğŸ§­ ${this.t("configNavigation",o)}</h4>
              <div class="config-row">
                <div class="form-group-checkbox">
                  <label>
                    <input type="checkbox" id="config-showGallery-full" ${this.config.showGallery?"checked":""} />
                    ğŸ¨ ${this.t("configShowGallery",o)}
                  </label>
                </div>
                <div class="form-group-checkbox">
                  <label>
                    <input type="checkbox" id="config-navHome-full" ${!1!==this.config.navigation?.showHome?"checked":""} />
                    ğŸ  ${this.t("configHomeButton",o)}
                  </label>
                </div>
              </div>
              <div class="config-row">
                <div class="form-group-checkbox">
                  <label>
                    <input type="checkbox" id="config-navBreadcrumb-full" ${!1!==this.config.navigation?.showBreadcrumb?"checked":""} />
                    ğŸ“ ${this.t("configBreadcrumb",o)}
                  </label>
                </div>
                <div class="form-group-checkbox">
                  <label>
                    <input type="checkbox" id="config-navToc-full" ${!1!==this.config.navigation?.showToc?"checked":""} />
                    ğŸ“‘ ${this.t("configToc",o)}
                  </label>
                </div>
              </div>
            </div>

            <!-- Section Diagrammes Mermaid -->
            <div class="config-section">
              <h4>ğŸ“Š ${this.t("configMermaid",o)}</h4>
              <div class="config-row">
                <div class="form-group-full">
                  <label for="config-mermaidTheme-full">${this.t("configMermaidTheme",o)}</label>
                  <select id="config-mermaidTheme-full">
                    <option value="default" ${"default"===this.config.mermaid?.theme?"selected":""}>Default (clair)</option>
                    <option value="dark" ${"dark"===this.config.mermaid?.theme?"selected":""}>Dark (sombre)</option>
                    <option value="forest" ${"forest"===this.config.mermaid?.theme?"selected":""}>Forest (vert)</option>
                    <option value="neutral" ${"neutral"===this.config.mermaid?.theme?"selected":""}>Neutral (neutre)</option>
                  </select>
                </div>
                <div class="form-group-checkbox">
                  <label>
                    <input type="checkbox" id="config-mermaidStart-full" ${!1!==this.config.mermaid?.startOnLoad?"checked":""} />
                    ğŸš€ ${this.t("configMermaidAuto",o)}
                  </label>
                </div>
              </div>
              <div class="config-row">
                <div class="form-group-checkbox">
                  <label>
                    <input type="checkbox" id="config-mermaidMaxWidth-full" ${!1!==this.config.mermaid?.flowchart?.useMaxWidth?"checked":""} />
                    ğŸ“ ${this.t("configMermaidMaxWidth",o)}
                  </label>
                </div>
              </div>
            </div>

            <!-- Section PlantUML -->
            <div class="config-section">
              <h4>ğŸŒ¿ ${this.t("configPlantuml",o)}</h4>
              <div class="config-row">
                <div class="form-group-full">
                  <label for="config-plantumlServer-full">${this.t("configPlantumlServer",o)}</label>
                  <input type="text" id="config-plantumlServer-full" value="${this.config.plantuml?.server||"https://www.plantuml.com/plantuml"}" />
                </div>
                <div class="form-group-full">
                  <label for="config-plantumlFormat-full">${this.t("configPlantumlFormat",o)}</label>
                  <select id="config-plantumlFormat-full">
                    <option value="svg" ${"svg"===this.config.plantuml?.format?"selected":""}>SVG (vectoriel)</option>
                    <option value="png" ${"png"===this.config.plantuml?.format?"selected":""}>PNG (bitmap)</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Section Coloration Syntaxique -->
            <div class="config-section">
              <h4>ğŸ¨ ${this.t("configPrism",o)}</h4>
              <div class="config-row">
                <div class="form-group-full">
                  <label for="config-prismTheme-full">${this.t("configPrismTheme",o)}</label>
                  <select id="config-prismTheme-full">
                    <option value="default" ${"default"===this.config.prism?.theme?"selected":""}>Default (clair)</option>
                    <option value="dark" ${"dark"===this.config.prism?.theme?"selected":""}>Dark (sombre)</option>
                    <option value="twilight" ${"twilight"===this.config.prism?.theme?"selected":""}>Twilight</option>
                  </select>
                </div>
                <div class="form-group-checkbox">
                  <label>
                    <input type="checkbox" id="config-prismAutoload-full" ${!1!==this.config.prism?.autoload?"checked":""} />
                    ğŸ”„ ${this.t("configPrismAutoload",o)}
                  </label>
                </div>
              </div>
            </div>

            <!-- Section Interface Utilisateur -->
            <div class="config-section">
              <h4>ğŸ’» ${this.t("configUI",o)}</h4>
              <div class="config-row">
                <div class="form-group-full">
                  <label for="config-uiTheme-full">${this.t("configUITheme",o)}</label>
                  <select id="config-uiTheme-full">
                    <option value="default" ${"default"===this.config.ui?.theme?"selected":""}>Default (clair)</option>
                    <option value="dark" ${"dark"===this.config.ui?.theme?"selected":""}>Dark (sombre)</option>
                    <option value="auto" ${"auto"===this.config.ui?.theme?"selected":""}>Auto (systÃ¨me)</option>
                  </select>
                </div>
                <div class="form-group-checkbox">
                  <label>
                    <input type="checkbox" id="config-uiResponsive-full" ${!1!==this.config.ui?.responsive?"checked":""} />
                    ğŸ“± ${this.t("configUIResponsive",o)}
                  </label>
                </div>
              </div>
              <div class="config-row">
                <div class="form-group-checkbox">
                  <label>
                    <input type="checkbox" id="config-uiAnimations-full" ${!1!==this.config.ui?.animations?"checked":""} />
                    âœ¨ ${this.t("configUIAnimations",o)}
                  </label>
                </div>
              </div>
            </div>

            <!-- Actions -->
            <div class="form-actions-full">
              <button onclick="window.OntoWave.instance.updateConfigFromFullPanel()" class="btn-primary">âœ… ${this.t("configApply",o)}</button>
              <button onclick="window.OntoWave.instance.downloadConfigFromPanel()" class="btn-secondary">ğŸ’¾ ${this.t("configDownloadHTML",o)}</button>
              <button onclick="window.OntoWave.instance.downloadOntoWaveScript()" class="btn-secondary">ğŸ“¥ ${this.t("configDownloadJS",o)}</button>
              <button onclick="window.OntoWave.instance.resetConfigToDefaults()" class="btn-warning">ğŸ”„ ${this.t("configReset",o)}</button>
            </div>
          </div>
        </div>
      `,this.addConfigPanelStyles(),n.appendChild(t);let e=document.getElementById("ontowave-floating-menu");e&&e.classList.add("has-config-panel"),"function"==typeof d.ontowaveUpdateDragState&&d.ontowaveUpdateDragState(),this.updateGeneratedCodeMini(),console.log("Config panel opened")}}else console.error("Menu content not found")}updateConfigFromFullPanel(){var e=document.getElementById("config-title-full")?.value||this.config.title,t=document.getElementById("config-defaultPage-full")?.value||this.config.defaultPage,o=document.getElementById("config-baseUrl-full")?.value||this.config.baseUrl,n=document.getElementById("config-locales-full")?.value.split(",").map(e=>e.trim()).filter(e=>0<e.length)||this.config.locales,a=document.getElementById("config-fallbackLocale-full")?.value||this.config.fallbackLocale,i=document.getElementById("config-showGallery-full")?.checked||!1,l=!1!==document.getElementById("config-navHome-full")?.checked,r=!1!==document.getElementById("config-navBreadcrumb-full")?.checked,s=!1!==document.getElementById("config-navToc-full")?.checked,c=document.getElementById("config-mermaidTheme-full")?.value||"default",d=!1!==document.getElementById("config-mermaidStart-full")?.checked,g=!1!==document.getElementById("config-mermaidMaxWidth-full")?.checked,m=document.getElementById("config-plantumlServer-full")?.value||"https://www.plantuml.com/plantuml",u=document.getElementById("config-plantumlFormat-full")?.value||"svg",f=document.getElementById("config-prismTheme-full")?.value||"default",p=!1!==document.getElementById("config-prismAutoload-full")?.checked,h=document.getElementById("config-uiTheme-full")?.value||"default",v=!1!==document.getElementById("config-uiResponsive-full")?.checked,b=!1!==document.getElementById("config-uiAnimations-full")?.checked;this.config.title=e,this.config.defaultPage=t,this.config.baseUrl=o,this.config.locales=n,this.config.fallbackLocale=a,this.config.showGallery=i,this.config.navigation={showHome:l,showBreadcrumb:r,showToc:s},this.config.mermaid={theme:c,startOnLoad:d,flowchart:{useMaxWidth:g},sequence:{useMaxWidth:g},gantt:{useMaxWidth:g},journey:{useMaxWidth:g}},this.config.plantuml={server:m,format:u},this.config.prism={theme:f,autoload:p},this.config.ui={theme:h,responsive:v,animations:b},document.title=this.config.title,this.showNotification("Configuration appliquÃ©e avec succÃ¨s ! ğŸ‰"),console.log("Configuration mise Ã  jour:",this.config)}resetConfigToDefaults(){var e;confirm("Voulez-vous vraiment rÃ©initialiser toute la configuration aux valeurs par dÃ©faut ?")&&(Object.assign(this.config,{title:"OntoWave Documentation",baseUrl:"/",defaultPage:"index.md",locales:[],fallbackLocale:"en",showGallery:!1,mermaid:{theme:"default",startOnLoad:!0,flowchart:{useMaxWidth:!0},sequence:{useMaxWidth:!0},gantt:{useMaxWidth:!0},journey:{useMaxWidth:!0}},plantuml:{server:"https://www.plantuml.com/plantuml",format:"svg"},prism:{theme:"default",autoload:!0},navigation:{showHome:!0,showBreadcrumb:!0,showToc:!0},ui:{theme:"default",responsive:!0,animations:!0}}),(e=document.getElementById("ontowave-config-panel"))&&(e.remove(),"function"==typeof d.ontowaveUpdateDragState&&d.ontowaveUpdateDragState(),setTimeout(()=>this.toggleConfigurationPanel(),100)),this.showNotification("Configuration rÃ©initialisÃ©e ! ğŸ”„"))}updateConfigFromPanel(){var e=document.getElementById("config-title-mini")?.value||this.config.title,t=document.getElementById("config-locales-mini")?.value.split(",").map(e=>e.trim()).filter(e=>0<e.length)||this.config.locales,o=document.getElementById("config-showGallery-mini")?.checked||this.config.showGallery;this.config.title=e,this.config.locales=t,this.config.showGallery=o,document.title=this.config.title,this.updateGeneratedCodeMini(),this.showNotification("âœ… Configuration mise Ã  jour")}downloadConfigFromPanel(){var e={title:this.config.title,baseUrl:this.config.baseUrl,defaultPage:this.config.defaultPage,locales:this.config.locales,fallbackLocale:this.config.fallbackLocale,showGallery:this.config.showGallery,mermaid:{theme:this.config.mermaid.theme}},e=JSON.stringify(e,null,2),e=`<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>${this.config.title}</title>
</head>
<body>
    <script src="ontowave.min.js"></script>
    <script type="application/json" id="ontowave-config">
${e}
    </script>
</body>
</html>`,e=new Blob([e],{type:"text/html"}),e=URL.createObjectURL(e),t=document.createElement("a");t.href=e,t.download="index.html",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e),this.showNotification("ğŸ’¾ Fichier HTML tÃ©lÃ©chargÃ©")}downloadOntoWaveScript(){var e=document.createElement("a");e.href="ontowave.min.js",e.download="ontowave.min.js",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.showNotification("ğŸ“¥ Fichier ontowave.min.js tÃ©lÃ©chargÃ©")}updateGeneratedCodeMini(){var e={title:this.config.title,baseUrl:this.config.baseUrl,defaultPage:this.config.defaultPage,locales:this.config.locales,fallbackLocale:this.config.fallbackLocale,showGallery:this.config.showGallery,mermaid:{theme:this.config.mermaid.theme}},e=JSON.stringify(e,null,2).replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=`&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;${this.config.title}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script src="ontowave.min.js"&gt;&lt;/script&gt;
    &lt;script type="application/json" id="ontowave-config"&gt;
${e}
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;`,t=document.getElementById("generated-html-mini");t&&(t.innerHTML=e)}addConfigPanelStyles(){var e;document.getElementById("ontowave-config-panel-styles")||((e=document.createElement("style")).id="ontowave-config-panel-styles",e.textContent=`
        
        .ontowave-config-panel {
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          background: white;
          border: 1px solid #e1e4e8;
          border-radius: 12px;
          box-shadow: 0 16px 48px rgba(0,0,0,0.15);
          z-index: 1001;
          margin-top: 12px;
          max-height: 90vh;
          overflow-y: auto;
          min-width: 90vw;
          max-width: 95vw;
          width: auto;
        }
        
        .config-panel-content {
          padding: 0;
        }
        
        .config-full-panel {
          padding: 32px;
          max-width: none;
        }
        
        .config-full-panel h3 {
          margin: 0 0 32px 0;
          color: #0969da;
          font-size: 24px;
          font-weight: 700;
          text-align: center;
          padding-bottom: 16px;
          border-bottom: 2px solid #f6f8fa;
        }
        
        
        .config-section {
          margin-bottom: 32px;
          padding: 24px;
          background: #f6f8fa;
          border-radius: 8px;
          border-left: 4px solid #0969da;
        }
        
        .config-section h4 {
          margin: 0 0 20px 0;
          color: #24292e;
          font-size: 18px;
          font-weight: 600;
          display: flex;
          align-items: center;
          gap: 8px;
        }
        
        
        .config-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 16px;
        }
        
        .config-row:last-child {
          margin-bottom: 0;
        }
        
        
        .form-group-full {
          margin-bottom: 0;
        }
        
        .form-group-full label {
          display: block;
          font-weight: 600;
          margin-bottom: 8px;
          color: #24292e;
          font-size: 14px;
        }
        
        .form-group-full input,
        .form-group-full select {
          width: 100%;
          padding: 12px;
          border: 2px solid #d0d7de;
          border-radius: 6px;
          font-size: 14px;
          transition: border-color 0.2s ease;
        }
        
        .form-group-full input:focus,
        .form-group-full select:focus {
          outline: none;
          border-color: #0969da;
          box-shadow: 0 0 0 3px rgba(9, 105, 218, 0.1);
        }
        
        .form-group-full small {
          display: block;
          margin-top: 4px;
          font-size: 12px;
          color: #656d76;
          font-style: italic;
        }
        
        
        .form-group-checkbox {
          display: flex;
          align-items: center;
          margin-bottom: 0;
        }
        
        .form-group-checkbox label {
          display: flex;
          align-items: center;
          font-weight: 500;
          color: #24292e;
          font-size: 14px;
          cursor: pointer;
          margin: 0;
        }
        
        .form-group-checkbox input[type="checkbox"] {
          width: auto;
          margin: 0 8px 0 0;
          transform: scale(1.2);
          accent-color: #0969da;
        }
        
        
        .form-actions-full {
          display: flex;
          gap: 16px;
          justify-content: center;
          margin-top: 40px;
          padding-top: 24px;
          border-top: 2px solid #f6f8fa;
          flex-wrap: wrap;
        }
        
        .form-actions-full button {
          padding: 12px 24px;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
          min-width: 180px;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
        }
        
        .btn-primary {
          background: #0969da;
          color: white;
        }
        
        .btn-primary:hover {
          background: #0550ae;
          transform: translateY(-1px);
          box-shadow: 0 4px 12px rgba(9, 105, 218, 0.3);
        }
        
        .btn-secondary {
          background: #6f7782;
          color: white;
        }
        
        .btn-secondary:hover {
          background: #57606a;
          transform: translateY(-1px);
          box-shadow: 0 4px 12px rgba(111, 119, 130, 0.3);
        }
        
        .btn-warning {
          background: #d73a49;
          color: white;
        }
        
        .btn-warning:hover {
          background: #b31d28;
          transform: translateY(-1px);
          box-shadow: 0 4px 12px rgba(215, 58, 73, 0.3);
        }
        
        
        @media (max-width: 768px) {
          .ontowave-config-panel {
            min-width: 95vw;
            margin-top: 8px;
          }
          
          .config-full-panel {
            padding: 20px;
          }
          
          .config-row {
            grid-template-columns: 1fr;
            gap: 16px;
          }
          
          .form-actions-full {
            flex-direction: column;
            align-items: stretch;
          }
          
          .form-actions-full button {
            min-width: auto;
          }
        }
        
        
        .config-form-compact h3,
        .config-preview-compact h3 {
          margin: 0 0 16px 0;
          color: #0969da;
          font-size: 16px;
          font-weight: 600;
        }
        
        .form-group-compact {
          margin-bottom: 16px;
        }
        
        .form-group-compact label {
          display: block;
          font-weight: 600;
          margin-bottom: 6px;
          color: #24292e;
          font-size: 13px;
        }
        
        .form-group-compact input {
          width: 100%;
          padding: 8px;
          border: 1px solid #d0d7de;
          border-radius: 4px;
          font-size: 13px;
        }
        
        .form-group-compact input[type="checkbox"] {
          width: auto;
          margin-right: 6px;
        }
        
        .form-actions-compact {
          display: flex;
          gap: 10px;
          margin-top: 20px;
          flex-wrap: wrap;
        }
        
        .form-actions-compact button {
          flex: 1;
          padding: 10px 16px;
          border: none;
          border-radius: 6px;
          background: #0969da;
          color: white;
          font-size: 13px;
          font-weight: 600;
          cursor: pointer;
          transition: background 0.2s ease;
          min-width: 120px;
        }
        
        .form-actions-compact button:hover {
          background: #0550ae;
        }
        
        .config-preview-compact {
          background: #f6f8fa;
          border-radius: 6px;
          padding: 16px;
        }
        
        .code-preview-mini {
          background: #24292e;
          color: #f6f8fa;
          padding: 12px;
          border-radius: 4px;
          font-family: 'SF Mono', Consolas, 'Liberation Mono', Menlo, monospace;
          font-size: 11px;
          line-height: 1.4;
          overflow-x: auto;
          max-height: 300px;
          overflow-y: auto;
        }
      `,document.head.appendChild(e))}navigate(e){this.loadPage(e)}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e},console.log("ğŸ“ Configuration updated")}}async function a(){try{var e,t=await fetch("./config.json");if(t.ok)return e=await t.json(),console.log("ğŸ“ Configuration chargÃ©e depuis config.json:",e),e}catch(e){console.log("ğŸ“ Pas de config.json trouvÃ©, utilisation de la configuration par dÃ©faut")}return{}}document.addEventListener("DOMContentLoaded",async()=>{let e=d.OntoWaveConfig||{};e=d.OntoWaveConfig?{...await a(),...d.OntoWaveConfig}:await a(),d.OntoWave={instance:new n(e)},await d.OntoWave.instance.init(),console.log("ğŸŒŠ OntoWave initialisÃ© automatiquement")}),d.OntoWaveClass=n})(window);